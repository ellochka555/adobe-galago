<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5370610-1223681</DOCNO>
<TEXT>
<subject>how to use Context3D.setSamplerStateAt</subject>
<post author="shooden" timestamp="Jun 1, 2013 3:37 AM">
<s>the setsamplerstateat function can set texture samplers manually. it is a better way to management smapler state then write much shaders just have diffrent samplers.the document http://help.adobe.com/en_us/flashplatform/reference/actionscript/3/fla sh/display3d/context3d.html#setsamplerstateat() says " if you do not want the program to change sampler state, set the ignoresamnpler bit in agal and use this function." but i can't understand how to do this, any one give some idea?</s><s> thanks! 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5370610-6232879</DOCNO>
<TEXT>
<subject>how to use Context3D.setSamplerStateAt</subject>
<post author="netbaixc2012" timestamp="Mar 21, 2014 8:29 PM">
<s>tex ft0, v0, fs0 <ignoresampler> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6229293-1432857</DOCNO>
<TEXT>
<subject>Trying to compile Neverball as swf - "make[1]: *** No rule to make target `sols'.Ê Stop."</subject>
<post author="Mr Margaret Scratcher" timestamp="Mar 20, 2014 4:24 PM">
<s>hi there, 
just getting started with playing with crossbridge/flascc, and after successfully compiling a few of the included samples, i thought i'd try to follow this guide: http://www.adobe.com/devnet/games/articles/compiling-opengl-games.htm l 
and try to compile neverball. 
</s><s>as i'm new to all this, i've used the included modified main.c, preloader.as, console.as and makefile so that i can get my head around the general procedure, before delving in further and actually modifying/making those bits myself. 
</s><s>however, when i try to <quote>
<s>make flascc=/users/marge/crossbridge/sdk alcextra=/users/marge/desktop/design_stuff_mac/frameworks/flascc_libr aries gls3d=/users/marge/desktop/design_stuff_mac/frameworks/gls3d/gls3d 
</s></quote>it gets as far as 
</s><s>"sols \" in the makefile here: 

cd neverball-1.5.4 && path=$(flascc)/usr/bin:$(alcextra)/usr/bin:$(path) make \ datadir=data \ ldflags="-l$(alcextra)/install/usr/lib/ -pthread" \ cflags="-o4" \ cc="gcc" \ sdl_cppflags="$(shell $(flascc)/usr/bin/sdl-config --cflags) -i$(alcextra)/install/usr/include -i$(alcextra)/install/usr/include/sdl -i$(gls3d)/install/usr/include" \ png_cppflags="$(shell $(flascc)/usr/bin/libpng-config --cflags)" \ sdl_libs="$(shell $(flascc)/usr/bin/sdl-config --libs)" \ png_libs="$(shell $(flascc)/usr/bin/libpng-config --libs) -lz" \ debug=0 enable_nls=0 \ sols \ -j4 and gives this error in the console: 

<quote>
<s>make[1]: *** no rule to make target 'sols'.</s><s> stop.</s><s> 
</s></quote>

</s><s>i'm guessing that this part of the makefile compiles all the required sdl libs, and as far as i can see i've set my path correctly (there is a folder called '/install/usr/lib/' in the root of my 'desktop/design_stuff_mac/frameworks/flascc_libraries' folder 
so i'm not sure where to go from here 
any pointers? 

</s><s>thanks.</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6229293-6229302</DOCNO>
<TEXT>
<subject>Trying to compile Neverball as swf - "make[1]: *** No rule to make target `sols'.Ê Stop."</subject>
<post author="Mr%20Margaret%20Scratcher" timestamp="Mar 20, 2014 5:13 PM">
<s>okay, so dug around a bit further, commented out the 'sols \' line and it got a bit further on before reporting a few errors when it got to importing the oggvorbis libraries. 
</s><s>sooo...</s><s> i decided to re-downlowd the alcextra bits, this time via git rather than as a zip. 
</s><s>uncommented the 'sol \ ' line and tried to make and it now seems to be working... 
</s><s>i'm hoping to work my way up to compiling some old games by myself... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6229293-6229303</DOCNO>
<TEXT>
<subject>Trying to compile Neverball as swf - "make[1]: *** No rule to make target `sols'.Ê Stop."</subject>
<post author="Mr%20Margaret%20Scratcher" timestamp="Mar 20, 2014 5:16 PM">
<s>woop! Ê it worked
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6215725-1429499</DOCNO>
<TEXT>
<subject>Event from C++ to AS3</subject>
<post author="gargle256" timestamp="Mar 17, 2014 2:13 AM">
<s>hi, 
</s><s>i'm porting an alchemy code to flascc, and i have one little question : 
how do you convert "as3_calls("handleencodecanceled", clientobj, onearray);" to a flascc compatible code ? 
i've looked in the samples and i see nothing identical.</s><s> thanks for ideas. 
</s><s>regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6215725-6218291</DOCNO>
<TEXT>
<subject>Event from C++ to AS3</subject>
<post author="chg" timestamp="Mar 17, 2014 3:36 PM">
<s>that just looks like a function/method call to me, thus i'd think the closest equivalent would be call_v() (it's slightly closer than call() as the former like as3_calls() takes an as3 type array of arguments) 
</s><s>see: http://www.adobe.com/devnet-docs/flascc/docs/capidocs/as3plusplus.html #call_v or see also http://blogs.adobe.com/flascc/2012/12/08/operating-on-actionscript-obj ects-in-c/ which has an example using call() 
</s><s>note: if you must take the function name as a string, you will need to call getproperty()/getlex() (depending on whether it's a global function or a method call) to resolve the function name to an as3 object to give to call_v() 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6215725-6224250</DOCNO>
<TEXT>
<subject>Event from C++ to AS3</subject>
<post author="gargle256" timestamp="Mar 19, 2014 9:38 AM">
<s>hi, 
</s><s>thanks for your answer, but it not solve. 
</s><s>in fact, i create a function "encode" which is used asynchronously in as3 code.</s><s> in alchemy, ithey use : <quote>
<s>as3_val startasyncencodemethod = as3_functionasync(null, startencode); as3_val flashobj = as3_object("startasyncencode:as3valtype", startasyncencodemethod); 
</s></quote>i would like to have the same way.</s><s> how i can do it in flascc ? 
</s><s>best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6215725-6225958</DOCNO>
<TEXT>
<subject>Event from C++ to AS3</subject>
<post author="chg" timestamp="Mar 19, 2014 7:01 PM">
<s>i don't see how the follow up above relates to the original question which was: "...one little question: how do you convert "as3_calls("handleencodecanceled", clientobj, onearray);" to a flascc compatible code ?" it seems like the follow up is a different question altogether (it's frustrating to be told the solution was wrong, because it didn't address matters well outside the scope of the original question). 
</s><s>as far as i know you can't have flascc/crossbridge produce the kind of code you are looking for in your follow up auto-magically (i'm not 100% certain it doesn't exist some where, just that if it does i don't know of it). 
</s><s>you can use pthreads (you'll have to target fp 11.4+ for this) for true background processing (refer to the pthreads sample), or if your up to it you could implement the async processing without thread support (eg. if targetting fp 11.3 or earlier) manually the same as you would have to do in as3 prior to the addition of threading to the flash player (use say setinterval() to call a worker function every, say, 50 milliseconds; each time it's called the worker function does a little bit of work on the problem and checks if it's done, if it isn't done it just returns and waits to be re-called by the timer to continue, if it is done it calls clearinterval() then the completion callback function) 
</s><s>as for how to make a flascc/crossbridge c function callable from as3 (if this is part of your followup question?</s><s>!</s><s>), have a look at "__attribute__((annotate))" here for example: http://bruce-lab.blogspot.com.au/2012/12/migrating-from-alchemy-to-fla scc.html 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6215725-6227761</DOCNO>
<TEXT>
<subject>Event from C++ to AS3</subject>
<post author="gargle256" timestamp="Mar 20, 2014 9:05 AM">
<s>hi, 
</s><s>sorry to frustrate you. 
the aim is to convert the lib hookogg (http://labs.byhook.com/2011/05/03/alchemy-series-part-6-ogg-vorbis-lib rary-source-release/ in alchemy) into a flascc lib. 
all the compress code is ok, and run perfectly. 
</s><s>my as3 program use the lib asynchronously, so i must convert the lib to be a asynchron function.</s><s> but, i can't find the way in flascc.</s><s> (in alchemy, it's done using as3_functionasync). 
</s><s>the other way is to fire the "end" event to as3, but i'm lost too. 
</s><s>do you have any idea ?</s><s> using pthread is not the good way, i can't send the event. 
</s><s>thanks for your answer. 
</s><s>best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-1343929</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="siznakeo" timestamp="Nov 26, 2013 12:25 AM">
<s>osx 10.8.4 crossbridge 1.0.1 
</s><s>steps to reproduce: 
wget https://www.openssl.org/source/openssl-1.0.1e.tar.gz tar xvfz openssl-1.0.1e.tar.gz cd openssl-1.0.1e 
</s><s>now, edit the makefile.shared, line 9.</s><s> cc=~/crossbridge/sdk/usr/bin/gcc 
</s><s>save & close.</s><s> edit makefile.org, line 60 cc=~/crossbridge/sdk/usr/bin/gcc 
line 67 & 68 ar=~/crossbridge/sdk/usr/bin/ar $(arflags) r ranlib=~/crossbridge/sdk/usr/bin/ranlib 
save & close.</s><s> run ./config 
you'll see: warning!</s><s> if you wish to build 64-bit library, then you have to invoke './configure darwin64-x86_64-cc' *manually*.</s><s> you have about 5 seconds to press ctrl-c to abort. 
</s><s>ignore that.. it's ok.</s><s> now, open up makefile.</s><s> edit line 62 cc=~/crossbridge/sdk/usr/bin/gcc 
line 63, remove "-arch i386" (flashcc doesn't have that option) 
line 70 ranlib=~/crossbridge/sdk/usr/bin/ranlib 
now, i only need libcrypto.a, so: cd crypto/ make 
many of the objects are created, but it fails on ~/crossbridge/sdk/usr/bin/gcc -i. -i.. -i../include -dopenssl_threads -d_reentrant -ddso_dlfcn -dhave_dlfcn_h -wa,--noexecstack -o3 -fomit-frame-pointer -dl_endian -dopenssl_bn_asm_part_words -dopenssl_ia32_sse2 -dopenssl_bn_asm_mont -dopenssl_bn_asm_gf2m -dsha1_asm -dsha256_asm -dsha512_asm -dmd5_asm -drmd160_asm -daes_asm -dvpaes_asm -dwhirlpool_asm -dghash_asm -c -o x86cpuid.o x86cpuid.s' 
error: failed to execute compiler: /tmp/alcasgzdw5gjv..as:1 syntax error: extra characters found after end of program. .file "x86cpuid.s" 
[more errors here] 
321 errors found 
failed to run '/users/jakechapa/develop/litecoin/flash-based/crossbridge/sdk/usr/bi n/../../usr/bin/avm2-as' make[2]: *** [x86cpuid.o] error 1 make[1]: *** [build_crypto] error 1 make: *** [top] error 2 
</s><s>full output can be seen on: http://pastebin.ca/2482410 
please you beautiful wizards.. what am i doing wrong? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875484</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="_falcan0" timestamp="Nov 26, 2013 3:32 AM">
<s>i'm just guessing, but with ffmpeg i had to disamble assembler - maybe try no-asm when configuring? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875531</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="siznakeo" timestamp="Nov 26, 2013 4:22 AM">
<s>oh my goodness!</s><s> this worked!</s><s>!</s><s> 
</s><s>thanks a ton man.</s><s> you made my day 
for others reading..</s><s> i had to add 'no-asm' to the ./config step 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875532</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="siznakeo" timestamp="Nov 26, 2013 4:37 AM">
<s>actually...</s><s> i spoke too soon.</s><s> i did manage to get far enough to compile the *.</s><s>o file i needed, but when i try to package it up i get this: 
$ ~/crossbridge/sdk/usr/bin/ar rcs sha256.o libsha.a ~/crossbridge/sdk/usr/bin/ar: sha256.o: file format not recognized 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875620</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="_falcan0" timestamp="Nov 26, 2013 5:06 AM">
<s>just curious, why are you trying to package this manually?</s><s> usually make / make install should do all of that (create .</s><s>a and then install them). 
</s><s>file format not recognized sounds a bit strange though, i think the reason might be that your configure/make is trying to use cygwins toolchain instead of crossbridge.</s><s> i've got batch files i'm really using to configure/make/make install. 
</s><s>configure: 
</s><s>path=/cygdrive/c/pavel/flascc_1.0.1/sdk/usr/bin:$path ./configure --prefix=/cygdrive/c/pavel/flascc_1.0.1/sdk/usr 
make: 
path=/cygdrive/c/pavel/flascc_1.0.1/sdk/usr/bin:$path make 
make install: 
path=/cygdrive/c/pavel/flascc_1.0.1/sdk/usr/bin:$path make install 
maybe there's a more elegant solution, but this way it always works with flascc(crossbridge) toolchain. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875542</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="siznakeo" timestamp="Nov 26, 2013 5:21 AM">
<s>you know..</s><s> you guided me to generate libcrypto.a.</s><s> thank you.</s><s> 
</s><s>so i moved that over to ~/crossfire/sdk/usr/lib/ for use in a single .cpp file build.</s><s> there is only 1 final error i'm getting: 
gnu gold (gnu binutils 2.21.51.20110520) 1.11 ~/crossbridge/sdk/usr/bin/../../usr/lib/stdlibs_abc/crt1_c.o: error: undefined reference to '_main' collect2: ld returned 1 exit status 
oddly enough, i have an int main() defined in the single .cpp file, so i'm not sure why i'm hitting that error. 
</s><s>full pastebin: http://pastebin.ca/2482472 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875629</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="_falcan0" timestamp="Nov 26, 2013 5:29 AM">
<s>cool:) 
</s><s>kind of hard to read through the pastebin - could you simply paste what command(s) you used to compile the final app and also content of the .cpp file? 
</s><s>from the command it looks as if main was not included.</s><s> maybe try to wrap inside of the .cpp in 
extern "c" { 
your file 
} 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875706</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="siznakeo" timestamp="Nov 26, 2013 5:48 AM">
<s>i'm so close, yet so far away it seems.</s><s> i've been compiling under osx btw.</s><s> all my files are up here (i've moved libcrypto.a into this dir as well). 
http://www.otleylogic.com/screenshots/build-9eu0agsotx.zip 
</s><s>not sure if me being on osx makes a difference or not.</s><s> in either case, i really appreciate your help falcon. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-5875860</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="_falcan0" timestamp="Nov 26, 2013 6:28 AM">
<s>still the same issue, did you try wrapping the scrypt.cpp into extern "c" { }?</s><s> not sure about osx yeah i'm using win.</s><s> for me your archive doesnt work out of the box with my flascc unfortunately, undefined references to sha stuff.</s><s> anyway, i tried to just strip the .cpp to main function(left all the includes in though), then tried to use your build.sh with my folder for gcc and it did build a swf without any undefined _main errors. 
</s><s>this error would show either by missing .cpp reference or because .cpp(c++) mangles function names, unlike c. i'm not sure if it mangles also main plus you're using gcc, not g++ so not sure if that's the case.</s><s> try to strip code from this main .cpp to leave just main in it and compile.</s><s> if it doesnt work try to take away -lcrypto and see what it does etc. then hopefully you'll hit a point/understanding when this error disappears. 
</s><s>happy to help, i was stuck for weeks sometimes myself multiple times.. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-6043965</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="samsonite123" timestamp="Jan 23, 2014 5:30 AM">
<s>siznakeo, so did you manage to compile the swc ? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-6045568</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="siznakeo" timestamp="Jan 23, 2014 12:05 PM">
<s>i sure did.</s><s> i'm not 100% sure that i compiled all the functions in, but if you're looking for it give this a try: http://www.otleylogic.com/screenshots/libcrypto.a-ejtjuxhyxt.zip 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-6045641</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="samsonite123" timestamp="Jan 23, 2014 12:18 PM">
<s>this is an .</s><s>a i'm looking for swc or better yet how to create it.</s><s> i'm trying now for over two days ... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-6059805</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="siznakeo" timestamp="Jan 28, 2014 2:02 AM">
<s>please download my libcrypto package here: http://www.otleylogic.com/screenshots/openssl-1.0.1e-jxg4hppxto.zip 
open up makefile, and you'll notice references to /cross/bin/* 
replace those with the paths to your crossbridge install.</s><s> then you should be able to run make with your intentded arguments. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-6219956</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="electroteque1" timestamp="Mar 18, 2014 6:20 AM">
<s>hi i am also attempting to build openssl as i had already done it with flashcc.</s><s> however even with the no-hw flag its still trying to compile in cryptodev 
_h -dtermios -o3 -fomit-frame-pointer -wall -c -o eng_cryptodev.o eng_cryptodev.c eng_cryptodev.c:57:30: error: crypto/cryptodev.h: no such file or directory eng_cryptodev.c:73: error: field 'd_sess' has incomplete type 
this is unavailable in crossbridge obviouslly or is it ? 
i was able to compile polarssl without a problem just openssl because its make is broken it seems. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5875125-6220673</DOCNO>
<TEXT>
<subject>Compiling libcrypto.a with flashcc</subject>
<post author="electroteque1" timestamp="Mar 18, 2014 9:31 AM">
<s>it started to work again somehow but only if i remove references to cryptodev and built within the crypto directory.</s><s> i had to copy everything into place manually including the header files. 
i also got polarssl working too both work fine so am comparing each one. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6217945-1430156</DOCNO>
<TEXT>
<subject>importing avm2.intrinsics.memory - where are all the methods?</subject>
<post author="Arthur_Flower" timestamp="Mar 17, 2014 1:52 PM">
<s>hi all, 
</s><s>i am trying to use avm2.intrinsics.memory.lf64 , avm2.intrinsics.memory.l8 etc. like mentioned in many examples. 
i don't find them anywhere in any air sdk version i have... 
</s><s>all i find in the catalog.xml is 
<def id="avm2.intrinsics.memory:mfence" /> <def id="avm2.intrinsics.memory:casi32" /> 
</s><s>and consequently all i cam inport into as3 is mfence and casl32 
can somebofdy point me to the right direction?</s><s> where should i download airglobal.swc?</s><s> how can i sort this issue? 
</s><s>thanks for the help 
alfo 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6217945-6218479</DOCNO>
<TEXT>
<subject>importing avm2.intrinsics.memory - where are all the methods?</subject>
<post author="chg" timestamp="Mar 17, 2014 3:53 PM">
<s>hi alfo, 
</s><s>the point of calling these "intrinsics" is that these "calls" are supported and recognised by the asc2 compiler itself (and are at compile time converted to the equivalent actionscript bytecode opcodes). 
</s><s>the air sdk version matters only if you are using the compiler from it (ie. you are not using flascc/crossbridge which is what this area of the forum is devoted to), in which case you need the air 3.6 sdk or greater.</s><s> see http://www.adobe.com/devnet/air/articles/faster-byte-array-operations. html which describes the use of asc2 from the air 3.6 sdk with flash builder. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6192850-1423977</DOCNO>
<TEXT>
<subject>FAST_CWD as well as LLVM ERROR</subject>
<post author="David_Komer" timestamp="Mar 9, 2014 6:10 AM">
<s>two issues: 
1) how do you pass a >32 bit number from c to as3?</s><s> i try the following and get llvm error: 
unsigned long long int foo = 1;
 
inline_as3(
</s><s>                              "var ret:object = {valid: true, a: %0};\n"
                              : : "r"(foo)
                    );
 
</s><s>as3_returnas3var(ret); 


</s><s>changing it from "unsigned long long int" to "unsigned long int" works (but isn't what i need) 
2) compiling on windows 8.1 still gives me fast_cwd errors.... any eta on when this will be fixed?</s><s>!</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6192850-6193340</DOCNO>
<TEXT>
<subject>FAST_CWD as well as LLVM ERROR</subject>
<post author="chg" timestamp="Mar 9, 2014 11:10 AM">
<s>regarding #1 - i suspect the answer is that one doesn't.</s><s> if a 53 bit integer range suffices then you can cast it to a double without loss, and from there you can pass the value to actionscript where it will be of type number - http://help.adobe.com/en_us/flashplatform/reference/actionscript/3/num ber.html if you need all 64bits in actionscript, then realising that this will not map to an action number or int/uint why don't you pass it on two output registers instead of one? 

</s><s>regarding #2, is that a crossbridge/flascc error or is that a cygwin error (a quick google suggests the latter) ? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6192850-6193288</DOCNO>
<TEXT>
<subject>FAST_CWD as well as LLVM ERROR</subject>
<post author="David_Komer" timestamp="Mar 9, 2014 11:30 AM">
<s>#1 - ah, casting to double worked- thanks (i didn't actually test with a 52-bit number, but i assume it should be fine)! 
#2 - yes, bundled cygwin... testing on a mac did not have any problems.</s><s> though from some googling it seems like the standard distributed cygwin has fixed this some time ago- perhaps adobe needs to update the bundled version? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6183484-1421740</DOCNO>
<TEXT>
<subject>Cannot Link a swc File to Another</subject>
<post author="Peter Yuefeng Lee" timestamp="Mar 5, 2014 4:51 PM">
<s>i build the my_as3.abc using asc2 
java -jar ${flascc_home}/sdk/usr/lib/asc2.jar ${asc2_debug_options} -merge -md -abcfuture -as3 -import ${flascc_home}/sdk/usr/lib/builtin.abc -import ${flascc_home}/sdk/usr/lib/playerglobal.abc -le ${cmake_source_dir}/platform/js-flascc/as3/fzip.swc ${cmake_current_binary_dir}/src/my_as3.as ${as3_srcs} -outdir ${library_output_path} -out my_as3 
(i tried both -le and -li option for importing the fzip.swc, neither worked) 
and then i use the cmake command (which bascially calls flascc_1.0.1/sdk/usr/bin/g++): 
add_executable(my_swc ${swig_generated_source} ${cpp_srcs}) set_target_properties(my_swc properties link_flags "-flto-api=lto.txt -emit-swc=my_swc") set_target_properties(my_swc properties runtime_output_directory ${cmake_current_binary_dir}) set_target_properties(my_swc properties output_name "my_as3") set_target_properties(my_swc properties suffix ".swc") target_link_libraries(my_swc ${sonic_lib_dependencies} ${library_output_path}/my_as3.abc) 
</s><s>generating the final swc file my_as3.swc has no problem, but it seems the fzip.swc is not included/linked into my_as3.swc. 
</s><s>becaue when the app tries to use the unzipping feature from fzip.swc, it gives me: 
verifyerror: error #1014: class deng.fzip::fzipfile could not be found. 
</s><s>please advise. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6183484-6183765</DOCNO>
<TEXT>
<subject>Cannot Link a swc File to Another</subject>
<post author="chg" timestamp="Mar 5, 2014 7:54 PM">
<s>there's an example here, which uses mxmlc to compile actionscript and include actionscript / crossbridge swc libraries: http://blogs.adobe.com/flascc/2012/11/06/using-multiple-flascc-swcs-in -a-flash-project/ 
alternatively, i think you could also try just building your actionscript library to actionscript bytecode .abc files for the crossbridge toolchain (use might notice that all the compiled actionscript library code supplied with the toolchain is as .abc files rather than .swc).</s><s> i believe there exists tools like swc2abc that can also extract the bytecode from actionscript libraries and give you the .abc file, but i've no experience with them and i'm not aware of any such tool being included with crossbridge... 
</s><s>edit: i note that there's mention of a process to extract the bytecode from a swc library here: http://forums.adobe.com/message/5186914 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6162045-1416577</DOCNO>
<TEXT>
<subject>can't compile the first sample in crossbridge</subject>
<post author="RyanMakarov" timestamp="Feb 27, 2014 1:58 AM">
<s>when i'm trying to run make flascc=/cygdrive/c/crossbridge/sdk flex=/cygdrive/c/flex_sdk in run.bat it gives the error "unable to launch the java virtual machine".</s><s> i have already downloaded the 64-bit java and the flex sdk.</s><s> i have also downloaded the flash builder. 
any help in this matter will be appreciated. thanks in advance 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6162045-6162074</DOCNO>
<TEXT>
<subject>can't compile the first sample in crossbridge</subject>
<post author="w-v-i" timestamp="Feb 27, 2014 2:21 AM">
<s>i'd suspect incorrect path.</s><s> and i think you need java which can work in 32bit. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6162045-6162691</DOCNO>
<TEXT>
<subject>can't compile the first sample in crossbridge</subject>
<post author="RyanMakarov" timestamp="Feb 27, 2014 7:03 AM">
<s>but my os is windows 8 64bit 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6162045-6163169</DOCNO>
<TEXT>
<subject>can't compile the first sample in crossbridge</subject>
<post author="chg" timestamp="Feb 27, 2014 8:52 AM">
<s>always google your problem first if you google this one you will likely find some helpful solutions http://tinyurl.com/oxkvhd3 
anyway, you should probably check your windows classpath envirnoment variable is set correctly as the next step. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6146639-1412957</DOCNO>
<TEXT>
<subject>extremely long swf compilation time with included flascc swc</subject>
<post author="ThaFresh" timestamp="Feb 22, 2014 7:44 AM">
<s>flashdevelop is taking forever to compile when i have flascc created swc included, at least over 2 minutes 
this pc isnt a slouch either and compiles other flash content (inc alchemy/flascc libs) just fine. 
</s><s>is there maybe some flascc compilation settings i can adjust or something that woud help with that? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6146639-6148025</DOCNO>
<TEXT>
<subject>extremely long swf compilation time with included flascc swc</subject>
<post author="ThaFresh" timestamp="Feb 22, 2014 7:21 PM">
<s>switching to the asc2 compiler side steps the problem, no idea why 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6146639-6154491</DOCNO>
<TEXT>
<subject>extremely long swf compilation time with included flascc swc</subject>
<post author="w-v-i" timestamp="Feb 25, 2014 2:26 AM">
<s>have you build the swc with -o4 flag and exports.txt?</s><s> i had the same problem, it took ages but when i built it with -o4 it is fast and smooth. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6147948-1413268</DOCNO>
<TEXT>
<subject>My C file_exists Function Using stat Always Fails with errno = ENOENT</subject>
<post author="Peter Yuefeng Lee" timestamp="Feb 22, 2014 7:13 PM">
<s>i'm using flascc+swig to call my c function in adobe air application. 
</s><s>the c function: 
(no source code formatting here in adobe forum!</s><s>!</s><s>!</s><s>!</s><s>!</s><s> ?</s><s>?</s><s>?</s><s>?</s><s>?</s><s>) =================== int file_exists(const char filename[]) { struct stat stbuf; if (stat(filename, &stbuf) == -1) { return (0); } return (1); } =================== 
in my normal command line (of course, first compile a main.cpp), if i supple "/tmp/test.txt" (the file exists), the function 'file_exists' returns 1, which is expected. 
</s><s>however, after i use flascc+swig to compile this c function 'file_exists', and generate a swc library, and add this library to my adobe air application, and run it, it always returns 0, which is in correct. 
i checked the errno, it's value is enoent (2): a component of path does not name an existing file or path is an empty string. 
http://pubs.opengroup.org/onlinepubs/7908799/xsh/stat.html 
can you give me some idea? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6147948-6148844</DOCNO>
<TEXT>
<subject>My C file_exists Function Using stat Always Fails with errno = ENOENT</subject>
<post author="chg" timestamp="Feb 23, 2014 8:30 AM">
<s>when you build for the avmshell your program is seeing the local filesystem, when you build a swc file you don't... 
</s><s>suggest reading the description of "sample 7: filesystem" here: http://www.adobe.com/devnet-docs/flascc/docs/samples.html#t7 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5977061-1370527</DOCNO>
<TEXT>
<subject>ffmpeg wrapper that behaves like the command line</subject>
<post author="ThaFresh" timestamp="Jan 3, 2014 8:17 AM">
<s>i have ffmpeg compiling now and can package up a swc using the wrapper code from www.rainbowcreatures.com/product_flashywrappers.php 
it all works etc but doesnt quite do what i need, instead of passing frames i need to pass it a complete h264 stream as bytearray and get it to output either rawvideo frames or an flv. 
</s><s>would it be possible to knock up a wrapper that basically gives command line style access, using pipe access in/out etc.</s><s> i have 0 c knowledge but woudlnt it be easier than writing wrapper functions for each specific function we need? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5977061-6010786</DOCNO>
<TEXT>
<subject>ffmpeg wrapper that behaves like the command line</subject>
<post author="_falcan0" timestamp="Jan 14, 2014 5:07 AM">
<s>hi, i'm actually the author of flashywrappers 
i was trying to do just that but then it started to appear too hard to understand all that source in ffmpeg.c and ffmpeg_opt.c instead of starting from the basic wrapper, so i abandoned that approach.</s><s> another reason was i wanted something "async" so that the flash doesn't freeze - by just rewriting the command line tool i figured it would launch and return only when its done, freezing everything else in the meantime.</s><s> a solution of course would be to launch it on another worker, but i wanted to also show progress %, since transcoding/encoding takes quite some time. 
</s><s>so eventually i had faster success with the custom wrapper.</s><s> the fastest soution for you would also be a custom wrapper i might derive from my original wrapper.</s><s> the biggest issue i've seen at the time, apart from not understanding ffmpeg, was to rewrite input/output of their tool to "normal" memory as ffmpeg had special approaches to achieve that, like writing your own protocol which i had to grasp yet. 
</s><s>looking back at it, i think i might be able to rewrite the command line tool since i've learned how to replace file input/output by memory in my own wrapper.</s><s> the async / % issue would still be present of course, but in time that might be tweaked.</s><s> my current priorities are finishing flashywrappers 2.0 and also finishing a product derived from that.</s><s> but i might take on porting ffmpeg command line after that, its of course appealing to have universal solution for ffmpeg in web flash. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5977061-6013745</DOCNO>
<TEXT>
<subject>ffmpeg wrapper that behaves like the command line</subject>
<post author="chg" timestamp="Jan 14, 2014 6:58 PM">
<s>just a reminder: ffmpeg is lgpl with gpl parts (eg. libx264) so if you change anything in the code you are going to need to ensure the source code is available to anyone you make the modified library available to - including your free demo if it includes a modified version of ffmpeg. 
</s><s>if your work is to be considered a derivative work of ffmpeg (one way to not be a derivative work of an lgpl project is to package your commerical code separately and dynamically link to the compiled lgpl code) then it should be under a compatiple license.</s><s> derivative works are not allowed to have the restrictions with your flashywrappers license places such as the restriction on "modify, decompile, duplicate, "unlock", reverse-engineer or attempt to discover the source code or structure, sequence or organization of this software;" 
</s><s>please ensure you open source your work on any gpl/lgpl code including ffmpeg... and comply with the licenses of the works you are using. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5977061-6014840</DOCNO>
<TEXT>
<subject>ffmpeg wrapper that behaves like the command line</subject>
<post author="_falcan0" timestamp="Jan 15, 2014 5:37 AM">
<s>yes i am aware of licensing.</s><s> flashywrappers is provided with ogg/theora encoder swc(those are bsd-like) - ffmpeg wrappers are there only as .abc files without ffmpeg ever linked in, so i don't believe i'm breaching anything or am obliged to provide source codes .</s><s> that's why the author of this thread mentions they built ffmpeg btw., they have to do that at this point to get flashywrappers work with ffmpeg.</s><s> i'm myself talking about the licensing issues in the readme in case anyone decides to link ffmpeg with the various codecs. 
</s><s>if i modify ffmpeg command line tool it will be open sourced of course. 
</s><s>the biggest issue i see is for the end customer who downloads the swf from my customers, in case they would go ahead and build with the ffmpeg wrapper and ffmpeg lgpl(gpl i specifically warn against to not use).</s><s> i saw people suggesting to make everything available for example made of multiple swc's / object files, in a separate link somewhere in the app so that the end user can download / build the app, to comply with lgpl.</s><s> i think similar issue is with ios store apps at the moment and some people did that as well. 
</s><s>in the long run i'm going to do my best do get rid of ffmpeg, but for now i think this should be enough. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5977061-6146542</DOCNO>
<TEXT>
<subject>ffmpeg wrapper that behaves like the command line</subject>
<post author="ThaFresh" timestamp="Feb 22, 2014 7:25 AM">
<s>if anyones interested still i never did get the wrapper working with all the flexibility of the command line 
i ended up writing a very basic and very specific wrapper for the few functions i needed.</s><s> probably very close to the flashywrappers tool too, seems to be the way to go 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-4924021-1115994</DOCNO>
<TEXT>
<subject>Can flasCC treat OpenCL?</subject>
<post author="Xx_ann_pin_xX" timestamp="Dec 15, 2012 12:52 PM">
<s>hi, 
</s><s>does flascc support opencl framework?</s><s> if it supports, how do i set up it?</s><s> my environment is macbook air mid2012. 
</s><s>thank you.</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-4924021-4963462</DOCNO>
<TEXT>
<subject>Can flasCC treat OpenCL?</subject>
<post author="alexmac%40adobe.com" timestamp="Jan 2, 2013 3:48 PM">
<s>no, we don't support opencl 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-4924021-6127652</DOCNO>
<TEXT>
<subject>Can flasCC treat OpenCL?</subject>
<post author="siznakeo" timestamp="Feb 16, 2014 11:48 PM">
<s>hello.</s><s> is this answer still true?</s><s> i do wish opencl were adopted. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6095661-1400439</DOCNO>
<TEXT>
<subject>SSE2 Instruction Set</subject>
<post author="siznakeo" timestamp="Feb 6, 2014 9:08 PM">
<s>is there any way to leverage the sse2 instruction set with the gcc compiler?</s><s> is there a flag we can pass in? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6095661-6127443</DOCNO>
<TEXT>
<subject>SSE2 Instruction Set</subject>
<post author="chg" timestamp="Feb 16, 2014 8:45 PM">
<s>seems like the answer is yes: http://stackoverflow.com/questions/661338/sse-sse2-and-sse3-for-gnu-c (though this of course assumes you are not targetting as3/avm2 which has no sse2 instructions) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6064867-1392772</DOCNO>
<TEXT>
<subject>Can I use Visual Studio C++ with Flash/Flex GUI</subject>
<post author="Eiven" timestamp="Jan 29, 2014 7:49 AM">
<s>hi, i want build an directx 11 application which is currently not supported by flash.</s><s> i want use flash only for the gui like scaleform.</s><s> is this possible and how?
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6064867-6067091</DOCNO>
<TEXT>
<subject>Can I use Visual Studio C++ with Flash/Flex GUI</subject>
<post author="chg" timestamp="Jan 29, 2014 4:29 PM">
<s>possible i guess, albiet probably a bad idea, but completely unrelated to crossbridge (aka. flascc) which is the area served by this forum. 
</s><s>as far as i know adobe provides a standalone flash player, an activex control, a plugin for npapi and a plugin for ppapi.</s><s> seems like your asking whether you can host an activex control / npapi/ppapi plugin in your own engine...</s><s> ie. if you can do the work to implement it, why not?</s><s> it is compatible with flash player's licensing...</s><s> no idea, but i guess you can check that too. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6063257-1392382</DOCNO>
<TEXT>
<subject>Stacti_cast<>()Ê is invalid</subject>
<post author="lincx" timestamp="Jan 28, 2014 6:13 PM">
<s>inline_as3("trace(%0);/n" ::"r"(stacti_cast<unsigned int>(-1) ); the output is -1, not 4294967295, why? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6063257-6063778</DOCNO>
<TEXT>
<subject>Stacti_cast<>()Ê is invalid</subject>
<post author="chg" timestamp="Jan 29, 2014 12:50 AM">
<s>what is invalid about it (except the typo/mispelling of "static" as "stacti", which i presume is not your point) ? 
a cast affects the type c++ uses, but the actual bits are unaffected, and as far as i know the c++ interpretation of variable as signed or unsigned ceases to apply the moment you pass it to the inline assembler as an input on a general register, that's not crossbridge specific, atleast for the common cpu instruction sets i can think of (crossbridge is based somewhat off of x86) general (ie. integer) registers don't have a signed or unsigned property... 
</s><s>so why does the crossbridge inline assembler presume you want to interpret that 32bit "register" as an int, rather than a uint (or even a number)?</s><s> well i guess the implementers had to pick something, given that they don't see the c++ type just that they've got a 32bit "register", and int probably is the most reasonable choice, at least that would be my presumption. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6017422-1380878</DOCNO>
<TEXT>
<subject>Could Flascc compile the C/C++ source code into the dynamic link library based on the Flash VM?</subject>
<post author="vncore.cao" timestamp="Jan 15, 2014 5:03 PM">
<s>i have one project, it need dynamic load some .dll(or .so) files, i want to port the project into the flascc.</s><s> off course, i have these .dll(or .so) source code(c++), how to port these dlls into the flascc. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6017422-6043608</DOCNO>
<TEXT>
<subject>Could Flascc compile the C/C++ source code into the dynamic link library based on the Flash VM?</subject>
<post author="w-v-i" timestamp="Jan 23, 2014 2:43 AM">
<s>make it static lib and link it directly .... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6017422-6044106</DOCNO>
<TEXT>
<subject>Could Flascc compile the C/C++ source code into the dynamic link library based on the Flash VM?</subject>
<post author="vncore.cao" timestamp="Jan 23, 2014 6:30 AM">
<s>but need dynamic load these library by the fact requirement 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6017422-6044996</DOCNO>
<TEXT>
<subject>Could Flascc compile the C/C++ source code into the dynamic link library based on the Flash VM?</subject>
<post author="chg" timestamp="Jan 23, 2014 9:52 AM">
<s>i don't know what vncore.cao's reason is, but one i can think of is to make use of a lgpl licensed library as part of a non-gpl compliant work.</s><s> if that's the reason then some alternatives might be (nb.</s><s> i have given my answer to the topic in one of vncore.cao other duplicate threads) - 
use a different library with a license that will permit you to statically link it without forcing terms onto your work that you are not prepared to accept if the library has been implemented by a single person or team, contact them and enquire if the library can be used in your work under alternative terms (perhaps for a fee) separate your project into parts, a non-proprietary wrapper with that exposes an actionscript interface that you will opensource and which you can dynamically load into your project, and a separate proprietary part/s.</s><s> most of the code can still be c/c++ but doing the interfacing in actionscript may free you from some of the potential work making sure that dynamically loaded crossbridge compiled code can call and be called from crossbridge compiled code in a main swf 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5959374-1365884</DOCNO>
<TEXT>
<subject>TCP Socket not working at all</subject>
<post author="w-v-i" timestamp="Dec 27, 2013 6:53 AM">
<s>hi, i'm new to flash, the vm and so on so if this is a newbie question please point me to materials which i should read before a dive deeper.</s><s> i'm trying to get the smallest possible example of how to use general tcp socket using flascc.</s><s> i think that i miss some crucial bit of information as i was able to get it working easily in actionscript.</s><s> in c++ using flascc i'm getting the exception securityerror: error #2010 which i guess is linked to the crossdomain.xml file.</s><s> i'm using the flashpolicyd.py server to serve the policy files and again with as3 code it worked nicely.</s><s> i have a minimalist tcp server running as well to see any incoming connections. 
</s><s>running gdb is resulting in timeout all the time, see below, i couldn't figure out what's going on, but that is probably different issue i need to address. 
/../usr/share/flascc-run.gdb:1: error in sourced command file: localhost:6666: operation timed out. 

</s><s>so i feel a bit lost now, could anybody help?</s><s> the source code is available : http://pastebin.com/k9rxbcdd what is the minimal flash::net::socket code to get it running? 
</s><s>thanks a lot vilda 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5959374-5965865</DOCNO>
<TEXT>
<subject>TCP Socket not working at all</subject>
<post author="w-v-i" timestamp="Dec 30, 2013 7:50 AM">
<s>so, after trying couple of different things i discovered that i'm actually running in local-with-filesystem flash sandbox which has no network access at all.</s><s> so now i'm wondering how to actually force the swf to be started in the local-with-networking sandbox ... any help appreciated 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5959374-5968550</DOCNO>
<TEXT>
<subject>TCP Socket not working at all</subject>
<post author="w-v-i" timestamp="Dec 31, 2013 2:13 AM">
<s>so changing it to local-trusted sanbox helped.</s><s> now i see connection to the policy server but no request it only connects and doeasn't issue the <policy-file-request/> ... anybody any ideas? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5959374-5976569</DOCNO>
<TEXT>
<subject>TCP Socket not working at all</subject>
<post author="w-v-i" timestamp="Jan 3, 2014 4:50 AM">
<s>so after another bit of fiddling with stuff i got to the point that it actually makes the desired connection, no more need of the policyfile but the bhaviour is the same it just connects and hangs no call to events:connect handler.</s><s> wondering what's going on, gdb still not working, but thats another issue which i'm going to ask for help in different thread. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5959374-5988154</DOCNO>
<TEXT>
<subject>TCP Socket not working at all</subject>
<post author="w-v-i" timestamp="Jan 7, 2014 2:13 AM">
<s>as i'm the only person replying here i hope that at least somebody is enjoying this as a good story of a c developer fighting flash .</s><s> i never worked with flash before so for me it is unknown ground.</s><s> somebody should write a tutorial flascc and flash for c developers i have to admit that with certain things a really fight and feel like a least competent developer on the planet ....</s><s> oh i just said that, when somebody should do something it means that i should ... anyway to keep the show going 
i got to the point where i connect to the server and send stuff which is received by the server, the server is just echoing back but unfortunately reading the server echo is not working yet.</s><s> when trying to compile socketinstance->bytesavailable() when the flash::events::dataevent::data is fired i get 
socket.cpp:47: error: no match for call to '(as3::ui::flash::net::socket::internal::iprop_bytesavailable) ()' 
how do i get the flash object properties as described in as3 api docs http://help.adobe.com/en_us/flashplatform/reference/actionscript/3/fla sh/net/socket.html#bytesavailable in the flascc c++ code? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5959374-6043614</DOCNO>
<TEXT>
<subject>TCP Socket not working at all</subject>
<post author="w-v-i" timestamp="Jan 23, 2014 2:55 AM">
<s>so final update, after bit of fiddling and trying everything works, i learnt a lot about flash in the mean time so i don't regret the time spent. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6043506-1387411</DOCNO>
<TEXT>
<subject>how to create the .a library file(such as these files in the sdk/usr/lib)?</subject>
<post author="vncore.cao" timestamp="Jan 23, 2014 1:58 AM">
<s>how to create the .</s><s>a library file(such as these files in the sdk/usr/lib)? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6043506-6043606</DOCNO>
<TEXT>
<subject>how to create the .a library file(such as these files in the sdk/usr/lib)?</subject>
<post author="w-v-i" timestamp="Jan 23, 2014 2:40 AM">
<s>i guess you want to create a static lib : http://www.cs.duke.edu/~ola/courses/programming/libraries.html 
you need to use ar command http://unixhelp.ed.ac.uk/cgi/man-cgi?ar 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-1355229</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Dec 10, 2013 10:38 AM">
<s>hi, 
</s><s>i try to compile the ogg lib include in the crossbridge project, but i can't.</s><s> (the aim is to make an ogg encoder, and i need the lib when i link the flascc project) on mac, i do : 
./configure (ok) make --> 
var/folders/tq/vdbtlt9j5xx72_87zc11q9h40000gn/t//cceysz02.s:unknown:fa tal:can't create output file: .libs/framing.o make[2]: *** [framing.lo] error 1 make[1]: *** [all-recursive] error 1 make: *** [all] error 2 

and on windows in the crossbridge terminal : 
./configure --> 
configure: error: in '/cygdrive/f/crossbridge-master/libogg-1.3.0': configure: error: c compiler cannot create executables see 'config.log' for more details (gcc: cannot execute binary file) 
someone have compiled the lib before ?</s><s> some idea to compile it ? 
</s><s>best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-5940702</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Dec 18, 2013 2:48 AM">
<s>hi, 
</s><s>if i use the hook source to compile the ogg source code, all compile ok using gcc-4 (on windows version of crossbridge).</s><s> but when i link the ogg lib with my project, i got some "undefined reference" error on _vorbis_info_init for example. 
</s><s>if i check the ogg lib with nm, the _vorbis_info_init function is well defined.</s><s> if i check the header of the ogg lib compared to png lib provided by crossbridge, it seems ok. 
</s><s>someone know why i can't link ? 
thanks.</s><s> regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6000281</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="Zen%20Seven" timestamp="Jan 10, 2014 6:58 AM">
<s>hi philippe, 
</s><s>have you any further success with this?</s><s> my team is seriously interested in getting ogg/vorbis (with loop point support) to work in flash/air for gaming development purposes.</s><s> i'm going to guess that your goals are similar.</s><s> perhaps we can work together and get this going. 
</s><s>mark 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6010712</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="_falcan0" timestamp="Jan 14, 2014 4:34 AM">
<s>well i'm using ogg/libvorbis in my (still flascc 1.0.1) build of ffmpeg and i've had no problems with it.</s><s> try to compile with flascc if you have it and see if that error appears there as well, if not its something that chaned in crossbridge. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6026445</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="Zen%20Seven" timestamp="Jan 18, 2014 6:52 AM">
<s>i ended managing to get ogg/vorbis working just using the legacy build simply using these source code here: 
http://labs.byhook.com/2011/02/22/ogg-vorbis-encoder-decoder-for-flash / 
works fine in release mode, and the program is totally unresponsive in debug mode.</s><s> maybe it's because it's alchemy - or the fact i'm using a ton of bytearray processing.</s><s> not sure.</s><s> i will investigate further in the near future.</s><s> what exactly does flascc provide that alchemy doesn't? 
</s><s>thanks!</s><s> 
</s><s>mark 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6032372</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Jan 20, 2014 10:00 AM">
<s>hi, 
</s><s>i try to compile the crossbridge project, using the git repositery, but it fail on extratools and submittests. 
</s><s>then, i add the ogg source code to my project, and compile all.</s><s> after some (hum) errors, i just block on that : 
<quote>
<s>registry.c:26: error: uninitialized const 'floor0_exportbundle' registry.c:27: error: uninitialized const 'floor1_exportbundle' registry.c:28: error: uninitialized const 'residue0_exportbundle' registry.c:29: error: uninitialized const 'residue1_exportbundle' registry.c:30: error: uninitialized const 'residue2_exportbundle' registry.c:31: error: uninitialized const 'mapping0_exportbundle' 
</s></quote>registry.c : <quote>
<s>const vorbis_func_floor floor0_exportbundle; const vorbis_func_floor floor1_exportbundle; const vorbis_func_residue residue0_exportbundle; const vorbis_func_residue residue1_exportbundle; const vorbis_func_residue residue2_exportbundle; const vorbis_func_mapping mapping0_exportbundle; 
</s></quote>and floor0.c : <quote>
<s>// export hooks const vorbis_func_floor floor0_exportbundle={ null,&floor0_unpack,&floor0_look,&floor0_free_info, &floor0_free_look,&floor0_inverse1,&floor0_inverse2 }; 
</s></quote>it's the same for floor1, residue0 to 2 and mapping0. 
</s><s>do you know how to solve that ?</s><s> or another way to have the ogg lib for link to a flascc project.</s><s> thanks for your answer. 
</s><s>best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6032552</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="chg" timestamp="Jan 20, 2014 10:40 AM">
<s>looks like: http://stackoverflow.com/questions/14568830/why-wont-gcc-compile-unini tialized-global-const might be similiar...</s><s> (if the c source is being compiled with g++ at least) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6032617</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Jan 20, 2014 11:01 AM">
<s>hi, 
</s><s>using -fpermissive don't change anything.</s><s> always the errors listed before. thanks for watching. 
</s><s>best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6032756</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="chg" timestamp="Jan 20, 2014 11:54 AM">
<s>the point wasn't necessarily to use the permissive switch, from what you post but it looks like those declarations should be prefixed "extern" in registry.c i googled for the file and the first version i came accross did use "extern" eg. 
extern const vorbis_func_floor floor0_exportbundle; 
from: http://hackage.haskell.org/package/libvorbis-0.1.0.0/src/libvorbis-1.3 .</s><s>3/lib/registry.c 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6033171</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Jan 20, 2014 1:13 PM">
<s>hi, 
</s><s>if i declare the const using extern, <quote>
<s>extern const vorbis_func_floor floor0_exportbundle; 
</s></quote>i have this error : <quote>
<s>/tmp/ccmgjtmf.o: error: undefined reference to '_floor0_exportbundle' /tmp/ccmgjtmf.o: error: undefined reference to '_floor1_exportbundle' /tmp/ccmgjtmf.o: error: undefined reference to '_residue0_exportbundle' /tmp/ccmgjtmf.o: error: undefined reference to '_residue1_exportbundle' /tmp/ccmgjtmf.o: error: undefined reference to '_residue2_exportbundle' /tmp/ccmgjtmf.o: error: undefined reference to '_mapping0_exportbundle' collect2: ld returned 1 exit status 
</s></quote>

</s><s>best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6033316</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="chg" timestamp="Jan 20, 2014 1:43 PM">
<s>so, to recap, it compiles now but it doesn't link, are the files that define the constants such as floor0.c being built and linked too, if so are the definitions reachable (eg. are there any #if ... preprocessor conditionals that might be preventing the compiler from seeing the definition?</s><s>) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6033280</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Jan 20, 2014 2:16 PM">
<s>hi, 
</s><s>floor0.c and other files are included in the makefile.</s><s> <quote>
<s>"$(flascc)/usr/bin/g++" $(base_cflags) -o3 -fpermissive -i./include bitwise.c framing.c analysis.c bitrate.c block.c codebook.c envelope.c floor0.c floor1.c info.c lookup.c lpc.c lsp.c mapping0.c mdct.c psy.c registry.c res0.c sharedbook.c smallft.c synthesis.c vorbisenc.c vorbisfile.c window.c ogglib.cpp as3api.cpp main.cpp -emit-swc=mylib.ogglib -o ogglib.swc 2> error.log 
</s></quote>do i miss something ? 
</s><s>best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6033804</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="chg" timestamp="Jan 20, 2014 4:54 PM">
<s><quote>
<s>gargle256 wrote: 
hi, 
floor0.c and other files are included in the makefile.</s><s> <quote>
<s>"$(flascc)/usr/bin/g++" $(base_cflags) -o3 -fpermissive -i./include bitwise.c framing.c analysis.c bitrate.c block.c codebook.c envelope.c floor0.c floor1.c info.c lookup.c lpc.c lsp.c mapping0.c mdct.c psy.c registry.c res0.c sharedbook.c smallft.c synthesis.c vorbisenc.c vorbisfile.c window.c ogglib.cpp as3api.cpp main.cpp -emit-swc=mylib.ogglib -o ogglib.swc 2> error.log 
</s></quote>do i miss something ? 
</s><s>best regards, philippe 
</s></quote>right... again i suggest you check the preprocessor conditionals in the files like floor0.c - maybe also check the make/configuration files the code came with to see what definitions they try to define for the supported envirnoments/configuration options, the code that defines the constants may be being stripped out by the preprocessor! 
</s><s>i'm am also presuming that that's not the makefile that the code came with... it looks like straight c code, and it looks like i assumed correctly before when i suggested you were using g++ to compile... which does make me also wonder: why u not use gcc for the c code?(not that i expect this will change much, but there's some possibility it might and you should try and probably try to use the right tools for the job) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6039739</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Jan 22, 2014 6:09 AM">
<s>hi, 
</s><s>i switch to gcc.</s><s> g++ was used because i saw that on crossbridge sample. 
</s><s>now, i've something strange : <quote>
<s>block.c:118: error: 'alloc_chain' undeclared (first use in this function) 
</s></quote>and the declaration of alloc_chain, in <vorbis/codec.h> <quote>
<s>
#ifndef _vorbis_codec_h_ #define _vorbis_codec_h_ 
#ifdef __cplusplus extern "c" { #endif /* __cplusplus */ 
#include <ogg/ogg.h> 
(...</s><s></s><s>) 
</s><s>struct alloc_chain{ void *ptr; struct alloc_chain *next; }; 
(...</s><s></s><s>) 
#ifdef __cplusplus } #endif /* __cplusplus */ 
#endif 

</s></quote>
</s><s>it's not a problem with the path, header file is found.</s><s> and there is no #ifdef ou #ifndef 
thanks for any ideas 
best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6039936</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="chg" timestamp="Jan 22, 2014 7:25 AM">
<s>any chance this is something like: http://stackoverflow.com/questions/4994318/error-mystruct-undeclared-f irst-use-in-this-function ? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5917833-6040109</DOCNO>
<TEXT>
<subject>compile ogg/vorbis lib</subject>
<post author="gargle256" timestamp="Jan 22, 2014 7:46 AM">
<s>hi, 
</s><s>wowww, well done ....</s><s> <quote>
<s>struct alloc_chain *link=(alloc_chain*)_ogg_malloc(sizeof(*link)); 
--> 
struct alloc_chain *link=(struct alloc_chain*)_ogg_malloc(sizeof(*link)); 
</s></quote>thanks you a lot 
best regards, philippe 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-1381360</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="vncore.cao" timestamp="Jan 16, 2014 7:18 AM">
<s>hi, all i want to port a project into flascc, but the project includes some dll/so library files.</s><s> i can compile the main application into swc, and there are source about these library, then how do i compile the library into flashvm. the application need to dynamic load these library into the runtime system. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6022095</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="chg" timestamp="Jan 16, 2014 10:02 PM">
<s>a windows dll (.dll) is just a pe exectutable (eg.</s><s> a ".exe") without an entrypoint.</s><s> the flash equivalent i guess would be a swf that uses a loader to dynamically load and make calls to another swf. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6027708</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="vncore.cao" timestamp="Jan 18, 2014 4:23 PM">
<s>how to call the interface functions in the swc or swf files? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6028254</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="chg" timestamp="Jan 19, 2014 12:18 AM">
<s><quote>
<s>vncore.cao wrote: 
how to call the interface functions in the swc or swf files? 
</s></quote>i don't think this is the hard bit... the hard bit is probably rigging up your dynamically loaded swf to initialise it's crossbridge implementation properly (and maybe use the same stack...</s><s> i'm not certain you would want this but i think you would at least with non-multithreaded code).</s><s> when you get that right the public symbols should be added to c_run and if the stack is shared calls should just work (flash is kind of inherently "late bound" like that)... if the stack isn't shared then you'll have to figure something out to handle arguments passed on the stack 
will this be a hard thing to implement?</s><s> i'm guessing it may but it seems inherently possible. 
</s><s>if you haven't don't so already, it may be worth thoroughly searching the internet and trying to determine if anyone has written about trying this before... 
</s><s>i'm also assuming that when you say that you need you need to make libraries of code to be dynamically loaded, that this is a requirement that is set in stone (maybe a licensing thing?</s><s>), and not a misunderstanding of your options... 
</s><s>see also: "xy problem" here: http://www.perlmonks.org/?node_id=542341 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6028336</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="vncore.cao" timestamp="Jan 19, 2014 1:32 AM">
<s>could you give some examples about: how to export the public share symbol to c_run?</s><s> how to load swf in the flascc?</s><s> (such as dlopen or loadlibrary ..</s><s>) how to get the public share symbol entrypoint?</s><s> (such as dlsym or getprocaddr ...</s><s>) i haven't found any help information about the dynamic loading from the internet (inlcudes the adobe site). 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6028338</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="vncore.cao" timestamp="Jan 19, 2014 1:40 AM">
<s>i very hope adobe support dlopen....</s><s>?</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6028582</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="chg" timestamp="Jan 19, 2014 5:27 AM">
<s><quote>
<s>how to export the public share symbol to c_run? 
</s></quote>this is done automatically by the build system.</s><s> c_run is an actionscript namespace (ie.</s><s> i's not part of your c/c++ code).</s><s> you can see the actionscript code use the "--save-temps" arugent to gcc to prevent the deletion of the actionscript code that is normally discarded as part convertion of your code from c/c++ to llvm bitcode to actionscript to avm2 bitcode to a swf or swc file.</s><s> see https://github.com/adobe-flash/crossbridge/wiki/enable-%e2%80%93flto-a nd-%e2%80%93flto-export-options-to-optimize-your-application-and-reduc e-linking-time 
<quote>
<s>vncore.cao wrote: 
could you give some examples about: 
how to load swf in the flascc?</s><s> (such as dlopen or loadlibrary ..</s><s></s><s>) 

</s></quote>no.</s><s> i can point you to how to load an swf using actionscript: http://helpx.adobe.com/flash/kb/load-external-swf-swf.html 
<quote>
<s>vncore.cao wrote: 
could you give some examples about: how to get the public share symbol entrypoint?</s><s> (such as dlsym or getprocaddr ...</s><s></s><s>) 
</s></quote>functions don't exist inside the as3 bytearray used as "ram" for crossbridge compiled code, they are implemented as as3 functions however they use a stack made out of the ram bytearray rather than the actual as3 stack.</s><s> yes, there is emulation for function pointers, but why would you use that?</s><s> the late bound nature of the underlying implementation means that if you load the swf into the same domain the functions magically become callable without further effort (ie. there is no need for dlsym/getprocaddress). 

<quote>
<s>vncore.cao wrote: 

i haven't found any help information about the dynamic loading from the internet (inlcudes the adobe site). 
</s></quote>so, do you think anyone has actually implemented this before then? 
...</s><s> i am giving you my 2 cents worth on the very broad strokes of how you can write a loader yourself, but if your going to do that then you have a lot of your own research to do.</s><s> at the very least will mean learning alot more then i guess you know about actionscript, the flash api, and also taking apart the actionscript spat out by the build system.</s><s> you know, unless you can find some pre-existing code to do this (may not exist - i don't know if it does or not tbh) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6030708</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="vncore.cao" timestamp="Jan 20, 2014 12:50 AM">
<s>thank you very much.</s><s> i understand that your idea is through the actionscript as bridges, indirect for c + + to realize dynamic load swf files.</s><s> the fundamental point of the idea is actionscript as the main framework, the swc as a plug-in.</s><s> if in a train of thought, the c/c + + can be directly compiled executable file (swf) and libraries (swx), then for c/c + + users, is more simple, not even without around through actionscript.</s><s> maybe do a simple packaging can realize this function, for the flascc implementers adobe, it is very simple thing, but for ordinary users, is more difficult. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019230-6032505</DOCNO>
<TEXT>
<subject>How to compile c/c++ into library(such as .dll,.so,.a,.lib...) based on the flashvm bytecode</subject>
<post author="chg" timestamp="Jan 20, 2014 10:32 AM">
<s><quote>
<s>vncore.cao wrote: 
the fundamental point of the idea is actionscript as the main framework, the swc as a plug-in. 
</s></quote>no.</s><s> the "fundamental point" was that you can't implement a loader (for any system) without understanding a bit of what's happening under the hood.</s><s> i tried to prepare you that it could be hard, but that may have been overestimation, however i'm just not going to dig that deep for answering this when i don't care about implementing it myself.</s><s> if you try it then you'll know... 

<quote>
<s>vncore.cao wrote: 
maybe do a simple packaging can realize this function, for the flascc implementers adobe, it is very simple thing, but for ordinary users, is more difficult. 
</s></quote>flascc was renamed to crossbridge when it was open sourced.</s><s> i'm not sure that adobe is working on it since it's been handed off to the community. 
i get that your desire to do this isn't great enough for you to do much more than look around and then ask about it on a forum... but seriously it seems like you expect people to do work to support you (such as when you demanded examples of a bunch of things earlier) esp. when this is of no benefit to themselves (i do really appreciate alchemy/flascc/crossbridge as a big "hey everyone, look at this hack we did using llvm isn't it cool, we're giving it away for free because it seems like it might be pretty useful" kind of project, i might ask for help if i find something i want it to do different or better; but i hope i won't come off as complaining about it when i do because i understand that there is or should be a world of difference between "free hack" and "expensive commercial product" in terms of expectations of support and suitability for any particular purposes) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019544-1381376</DOCNO>
<TEXT>
<subject>Troubles with SDL image library</subject>
<post author="ziemovitto" timestamp="Jan 16, 2014 8:30 AM">
<s>hi, my goal is to port supertux - a 2d platform game to browser using crossbridge.</s><s> i currently work on os x maverics if thats important.</s><s> i'm very new to this area - i have some small experience with c++ after colege, but in work i work with web technologies - so im some sort of noob with that - especially with crossbridge. Ê i followed install instruction and crossbridge itself works fine - hello world compiles well.</s><s> now that i try to compile supertux proccess fails on ./configure level. Ê $ export path=~/crossbridge/sdk/usr/bin:$path $ ./configure checking build system type...</s><s> avm2-unknown-freebsd8.2 checking host system type...</s><s> avm2-unknown-freebsd8.2 checking target system type...</s><s> avm2-unknown-freebsd8.2 checking for a bsd-compatible install... /usr/bin/install -c checking whether build environment is sane... yes /users/zzz/projekty/supertux13/missing: unknown '--is-lightweight' option try '/users/zzz/projekty/supertux13/missing --help' for more information configure: warning: 'missing' script is too old or missing checking for a thread-safe mkdir -p... ./install-sh -c -d checking for gawk...</s><s> no checking for mawk...</s><s> no checking for nawk...</s><s> no checking for awk... awk checking whether make sets $(make)... yes checking whether make supports nested variables... yes checking for gcc... gcc checking whether the c compiler works... yes checking for c compiler default output file name... a.out checking for suffix of executables... checking whether we are cross compiling...</s><s> no checking for suffix of object files...</s><s> o checking whether we are using the gnu c compiler... yes checking whether gcc accepts -g... yes checking for gcc option to accept iso c89... none needed checking whether gcc understands -c and -o together... yes checking for style of include used by make...</s><s> gnu checking dependency style of gcc... gcc3 checking for g++...</s><s> g++ checking whether we are using the gnu c++ compiler... yes checking whether g++ accepts -g... yes checking dependency style of g++... gcc3 checking for dirent.h that defines dir... yes checking for library containing opendir... none required checking how to run the c preprocessor... gcc -e checking for grep that handles long lines and -e... /usr/bin/grep checking for egrep... /usr/bin/grep -e checking for ansi c header files... yes checking for sys/types.h... yes checking for sys/stat.h... yes checking for stdlib.h... yes checking for string.h... yes checking for memory.h... yes checking for strings.h... yes checking for inttypes.h... yes checking for stdint.h... yes checking for unistd.h... yes checking for unistd.h...</s><s> (cached) yes checking for an ansi c-conforming const... yes checking for gprof mode... disabled checking for debug mode... disabled checking wether opengl should be used... yes checking for sdl-config... /users/zzz/crossbridge/sdk/usr/bin/sdl-config checking for sdl - version >= 1.2.4... yes checking for mix_openaudio in -lsdl_mixer... yes checking for img_load in -lsdl_image...</s><s> no configure: error: sdl_image library required Ê and with the config.log: Ê configure:5390: checking for img_load in -lsdl_image configure:5415: gcc -o conftest -g -o2 -i/users/zzz/crossbridge/sdk/usr/include/sdl -d_gnu_source=1ÊÊ conftest.c -ltiff -ljpeg -lpng -lz -lsdl_image -lsdl_mixerÊ -l/users/zzz/crossbridge/sdk/usr/lib -wl,-rpath,/users/zzz/crossbridge/sdk/usr/lib -lsdl -lm -lvgl >&5 /users/zzz/crossbridge/sdk/usr/bin/ld: error: cannot find -ltiff /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_calc_output_dimensions' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_createdecompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_destroy_decompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_finish_decompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_read_header' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_read_scanlines' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_resync_to_restart' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_start_decompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_std_error' Ê at the moment i start to think that this maight be problem related to crossbridge itself.</s><s> lib sdl_image came with basic instalation - i also tried to compile it myself, but without any help.</s><s> some googling showed up that this problem was affecting some cygwin users, but i didn't give nay clues how ti fix that.</s><s> i tried to skip sdl_image in configure - and that is the only problem i have with libraries. Ê also if want to compile it in a normal way - without crossbridge, it works well. Ê anyone might be able to help with that?</s><s> i already lost a lot of time facing this bug, but i couldn't make it work.</s><s> i would really apprecieate any help.
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6019544-6028587</DOCNO>
<TEXT>
<subject>Troubles with SDL image library</subject>
<post author="chg" timestamp="Jan 19, 2014 5:23 AM">
<s><quote>
<s>ziemovitto wrote: ...</s><s></s><s> and with the config.log: 
configure:5390: checking for img_load in -lsdl_image configure:5415: gcc -o conftest -g -o2 -i/users/zzz/crossbridge/sdk/usr/include/sdl -d_gnu_source=1 conftest.c -ltiff -ljpeg -lpng -lz -lsdl_image -lsdl_mixer -l/users/zzz/crossbridge/sdk/usr/lib -wl,-rpath,/users/zzz/crossbridge/sdk/usr/lib -lsdl -lm -lvgl >&5 /users/zzz/crossbridge/sdk/usr/bin/ld: error: cannot find -ltiff 
</s></quote>
</s><s>this means you don't have a static library called "tiff" (at least in the library paths).</s><s> i'm guessing you can live without tiff (.tif) image support so you probably need to modify configure or it's arguments to reflect this (if the game has any tiff image resources you will need to convert these to another format...</s><s>) 
</s><s><quote>
<s>ziemovitto wrote: ...</s><s></s><s> and with the config.log: 
... /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_calc_output_dimensions' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_createdecompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_destroy_decompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_finish_decompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_read_header' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_read_scanlines' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_resync_to_restart' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_start_decompress' /users/zzz/crossbridge/sdk/usr/lib/libsdl_image.a: error: undefined reference to '_jpeg_std_error' ... 
</s></quote>pretty sure this means the jpeg library you have doesn't have the functions listed... but this error is stopping you from compiling conftest.c (ie. not the game) which is trying to see if your sdl_image library is up to it's standards... 
</s><s>porting doesn't mean compiling.</s><s> you suggest that you can skip the tests on the sdl_image library and configure without further errors so that gives you a way forward.</s><s> you may be lucky and find that the game doesn't call the missing jpeg functions, or if it does you may be able to work around what's missing, if the jpeg library is complete enough to load jpeg images then this might just mean replacing the function calls with their equivalents from the library which you have.</s><s> do remember though that as supertux is gpl you need to ensure that if you change anything your modify source code is made available to at least the same people as the compiled swf. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6022746-1382227</DOCNO>
<TEXT>
<subject>Bug? Using __attribute__((annotate())) pollutes the data segment</subject>
<post author="chg" timestamp="Jan 17, 2014 5:44 AM">
<s>i recently noticed that using __attribute__((annotate())) eg. __attribute__ ((cdecl, used, annotate("as3sig:public function render(event:event = null):void"))) doesn't just modify the output for the function but also preserves (leaves behind?</s><s>) a superfluous copy of the string literals supplied to annotate in the data segment, even when using the strip argument and not compiling a debug build. 
</s><s>while it's not preventing me from doing anything, i would prefer not to have this information stored redundantly in the crossbridge data segment of any swfs i produce. 
</s><s>i've been looking at llvmamv2codegen as used by llc but as yet haven't figured out how to stop this information being in the data segment nor alternatively how to filter it out of it during output (well beyond searching the table for specific strings like "as3sig" and hacking them out because that seems extremely ugly and would i imagine be rather fragile). 
i thus thought i might ask around here to: 
confirm my suspicions that this undocumented behaviour is not to be expected and is a bug ask for any ideas as to workarounds, or solutions (i wouldn't mind further customising the crossbridge llc tool to fix this) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6016323-1380635</DOCNO>
<TEXT>
<subject>accessing rootSprite from threaded c++</subject>
<post author="James Quirk" timestamp="Jan 15, 2014 11:40 AM">
<s>what is the correct way to access the rootsprite from a c++ application compiled with -swf-version=18?</s><s> for instance with -swf-version=17 i can use: 
inline_as3( "import flash.display.sprite;\n" "import flash.display.graphics;\n" "import com.adobe.flascc.cmodule;\n" "var rs:sprite = cmodule.rootsprite;\n" "var g:graphics = rs.graphics;\n" "g.linestyle(1, 0);\n" "g.beginfill(0xff0000, 0.5);\n" "g.drawrect(0,0,rs.width,rs.height);\n" "g.endfill();\n" ); 
but this won't work for -swf-version 18 as its run on a background worker. 
</s><s>in my actual application all i need do is to add a child to the rootsprite, which i can kludge by adding the child to the stage with a listener that then reparents the child to the rootsprite.</s><s> this approach, however, is flaky when i have multiple instances of the application embedded in a parent application.</s><s> so i am keen to find a more robust solution. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6016323-6017209</DOCNO>
<TEXT>
<subject>accessing rootSprite from threaded c++</subject>
<post author="chg" timestamp="Jan 15, 2014 3:36 PM">
<s>this is a good question... though it's not something i know much about though i suspect the answer might boil down to you can't manipulate the stage or it's children from a background worker, or rather, the best you can do from your worker is to ask your main thread nicely to do it for you (and obviously put code there to do so). 
</s><s>might be showing my ignorance here, but don't you have to choose to run the crossbridge c/c++ code in a background worker even if you compile on targeting a fp that supports workers.</s><s> ie. calling startbackground() rather than startasync() from the console? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6016323-6017273</DOCNO>
<TEXT>
<subject>accessing rootSprite from threaded c++</subject>
<post author="James%20Quirk" timestamp="Jan 15, 2014 4:27 PM">
<s>the call to startbackground is automatically done by the pre-supplied console for -swf-version=18. 
</s><s>note i've written a custom preloader and console, so i do have access to the rootsprite.</s><s> however i've been unable to push a reference to it across to my c++ code.</s><s> i've got as calling c++ with string arguments, but not a sprite reference.</s><s> it looks like its doable, but my understanding of the documentation is not quite there yet.</s><s> hence my original question. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6016323-6017474</DOCNO>
<TEXT>
<subject>accessing rootSprite from threaded c++</subject>
<post author="chg" timestamp="Jan 15, 2014 5:08 PM">
<s>i suspect a sprite reference isn't doable.</s><s> the as++ wrappers will just add the sprite to a as3 dictionary on like cmodule and give you a key to retrieve it, however if you use the code to try to retrieve it from a background worker the dictionary wont be there for you to access.</s><s> as3 types can't be shared with workers (not just sprite but also dictionary) this is my understanding of documentation such as http://help.adobe.com/en_us/as3/dev/ws2f73111e7a180bd0-5856a8af1390d64 d08c-7ffe.html listing the very few things that can be passed. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6016323-6017822</DOCNO>
<TEXT>
<subject>accessing rootSprite from threaded c++</subject>
<post author="James%20Quirk" timestamp="Jan 15, 2014 7:52 PM">
<s>i have happily been using internal::get_stage from a background worker, and having located the source: Ê Ê var internal::get_stage() __attribute__((noinline)); Ê var internal::get_stage() Ê { ÊÊÊ maybedelegate(&get_stage); ÊÊÊ unsigned id; ÊÊÊ int except; ÊÊÊ inline_as3 ( ÊÊÊÊÊ "try { " ÊÊÊÊÊ "%0 = as3_valacquireid(cmodule.rootsprite.stage); " ÊÊÊÊÊ "%1 = 0; " ÊÊÊÊÊ "} catch(e:*) { %0 = as3_valacquireid(e); %1 = 1; } " ÊÊÊÊÊ : "=r"(id), "=r"(except)); ÊÊÊ if(except) ÊÊÊÊÊ throw var(id); ÊÊÊ return var(id); Ê } Ê i find all i need do, is: ÊÊÊ ÊÊ flash::display::sprite rootsprite; ÊÊ inline_as3 ( ÊÊÊÊÊÊ "import com.adobe.flascc.cmodule;\n" ÊÊÊÊÊÊ "%0 = as3_valacquireid(cmodule.rootsprite);\n" ÊÊÊÊÊÊ : "=r"(rootsprite)); Ê i'd been trying this approach from the outset, but i wasn't using the all important as3_valacquireid and i don't recall seeing it mentioned in the documentation.Ê anyway, i now have a solution. Ê
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-1379051</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="imagenesis media" timestamp="Jan 13, 2014 11:10 PM">
<s>i am experiencing random additions of large time lapses (1-12ms) on seemingly random operations subsequent to their first run (jit definitely happens on the first run).</s><s> i do not understand why this happens (or whether it is in fact being recompiled for some reason). 
</s><s>because the lapses are utterly massive considering the operations should not take more than fractions of a millisecond: how does one proceed with regards to debugging when jit occurs or what is occuring during these large lapses?</s><s> this is not an issue of optimization but an issue that must be fundamentally avoided because any jit occuring on a frame is catastrophic.</s><s> considering this, how does one avoid jit on standard frames?</s><s> please specify whether other engines that aim to maintain 60 fps (box2d, nape, starling, all of whos' source i have browsed extensively) have encountered this behavior in their development and benchmarking.</s><s> on which operations this occured and what the replacement or culling of said operations was implemented. 
1.</s><s> timed: utils_mvc.propagation_lis_add diff: 0 timed: object_r.propagation_lis_add diff: 7 object_r propagation_lis_add is wrapping a single function utils_mvc.propagation_lis_add (whose execution is measured to take 0ms).</s><s> this is occuring in the areas measured so far throughout the execution.</s><s> random non sensical additions of anecdotally 3-12ms. 
2.</s><s> timed: display_object_container child_insert body diff: 11ms (inserting a doc into starling, likes to randomly vary between 0 and 12ms) 
3.</s><s> timed: lis is propagation_info_lis_i diff: 10 10ms randomly on the following runtime type check: if(lis is propagation_info_lis_i) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6010164</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="chg" timestamp="Jan 13, 2014 11:44 PM">
<s>firstly, what uber-voodoo-wizard magic are you employing to get timing that is correct to a millisecond or so?</s><s>?</s><s> assuming your running in the flash player, i only know how to get times that while having milliseconds counts are only accurate to the "tick count" frequency of the os... on modern windows the default is a tick approx every 15ms or so (you can use certain system calls to speed up the frequency but it will effect the entire os, and the ticks are used for task switching) you might see betting on macos i believe that it's ticks are 10ms... 
</s><s>assuming you have already ruled out garbage collection (eg. because you aren't using and discarding that many as3 type variables in your tests...</s><s>) and the time resolution issues above, and not getting to execute (other processes running on the computer, and other flash player objects in tabs/windows in testing in a browser - flash player is often a shared rather then being re-instantiated for each instance) why don't you spit out the lto optimised as3 code from compilation and... 
1. find your functions in the actionscript - confirm you suspicions about lenght, etc ... how long are the functions with issues?</s><s> 2. maybe try getting the as3 declations for the functions you are troubleshooting to be prefixed with "[execpolicy(osr=2)]" (without the quotes)... as is hinted at in llvm-2.9/lib/target/avm2/avm2.h this might just be undocumented way to tell flash not to bother with jit and just execute the function interpretively (as3 constructors don't get jited automatically because they are not expected to benefit).</s><s> running through the interpreter will be slower by you won't take the initial hit of jit compilation of the avm2 bitcode to native instructions...</s><s> 3. if the functions are huge, maybe try and convince the compiler to be less agressive inlining, maybe even tactically mark some functions as noinline in c/c++ 
edit: and sorry, but i still don't get why you think your code is being re-jited over and over?</s><s> are you using self-modifying code?</s><s> no......</s><s> ?</s><s> then....................</s><s> ?</s><s>?</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6010271</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="imagenesis%20media" timestamp="Jan 14, 2014 1:04 AM">
<s>1.</s><s> i am running ubuntu with regards to the ms timing.</s><s> 2. the advice with regards to isolating function body content length, manually disabling jit are very useful and are new to me. 
i will confirm that the timing is accurate or not immedietly.</s><s> i believe it is accurate because i am timing functions that are nested in their execution and the sum of the times makes sense.</s><s> the exhibited delay is real because i am getting executions of routines that are like 600milliseconds for things i expect to complete in a fraction of a frame's 16ms. 
</s><s>the reason why i think it is jiting is because as specified it is wrapping a 10ms delay around functions which themselves are reporting a 0ms execution time (ie a fraction of a millisecond).</s><s> on the first run of functions when jit is certainly occuring this type of timing is exhibited. 
</s><s>however, as specified i am far from certain that it is jit or something else is occuring. 
no there is nothing special about the code.</s><s> the functions are not called reflectively.</s><s> they obviously report correct (0ms) execution times in most instances.</s><s> i was under the impressions in writing this code that this would not occur. 
</s><s>this is with haxe compiled code.</s><s> i have posted in this forum because: 
a) it probably has the highest profiency with regards to avm2 b) utilizing flasc may or may not yield a solution to this problem c) this is a utlimately a question of reliably yielding 16ms frames (ie for an engine) 
</s><s>once again, i had no expectation this would occur and the functions should (and do in most instances) execute in sub millisecond time. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6010388</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="chg" timestamp="Jan 14, 2014 1:39 AM">
<s>ubuntu is awesome, but not for flash (damn adobe dropping support for linux... and never figuring out how to get open gl to work in linux (for stage3d) i guess that had to have been embarrassing, maybe that's the real reason they dropped the platform, joke) 
</s><s>seggest maybe making sure you are testing with flash player 11.2 (i think that was the last released) in firefox or similar.</s><s> google chrome tends to have a special implementation of flash which can be a bit wacky at times / with certain updates. 
</s><s>maybe you could test the apparent granulatity of your timings and just do a bit loop calling the time function and log when it gives a different value... should be a fairly quick sanity check 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014223</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="imagenesis%20media" timestamp="Jan 15, 2014 12:51 AM">
<s>1. it was posted by an adobe employee (in a forum thread) that scout facilitates microsecond measurements (and displays) with the telemetry custom measurements api (this does not appear in any devnotes or screenshots).</s><s> can anyone confirm?</s><s> (it also appear that telemetry enabled swfs appear to be able to measure operations in at a minimum of 5 microsecond increments) 2. consider the following: Ê it has been specified that flash relies on a 5-15ms tick provided by operating systems (15ms specified on windows, perhaps 10ms on osx) Ê timely needs to adjust for this in the calibration and on measurement considering the exhibited behavior specified below.</s><s> in addition, the number of increments in a millisecond appears to be quite unstable. Ê windows generally returns consecutive milliseconds, however for a few hours yesterday i started getting returns from gettimer that were in 16 millisecond intervals as specified , as evidenced by this loop: Ê while(a<5000) { trace("time: "+time()); ++a; } Ê 1.</s><s> i don't believe the behavior of 15/16 interval timer is the expected behavior as you describe.</s><s> perhaps, the flash vm relies on it and approximates milliseconds, but i don't believe that is the expected output from gettimer as there is no documentation i could find and it generally returns consecutive milliseconds. Ê on linux: Ê the output from the above loop exhibits in determinant behavior.</s><s> in various executions of the swf it exhibited the following behaviors: Ê 1.</s><s> it returned milliseconds consecutively for 4 milliseconds and then skipped 5 milliseconds.</s><s> 2. it returned milliseconds consequitively for 4 or 3 milliseconds and then skipped 2 milliseconds. Ê ÊÊÊ public function time_test():void { ÊÊÊÊÊÊÊ trace("time: "+time()); ÊÊÊÊÊÊÊ var a:int=0; ÊÊÊÊÊÊÊ var targ:int=10; ÊÊÊÊÊÊÊ for(b in 0...10) { ÊÊÊÊÊÊÊÊÊÊÊ var s:float=time(); ÊÊÊÊÊÊÊÊÊÊÊ trace("s: "+s); ÊÊÊÊÊÊÊÊÊÊÊ a=0; ÊÊÊÊÊÊÊÊÊÊÊ while(true) { ÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊ var t=time(); ÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊ trace(t); ÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊ if(t!=s) { ÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊ break; ÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊ } ÊÊÊÊÊÊÊÊÊÊÊ } ÊÊÊÊÊÊÊÊÊÊÊ s=time()+targ; ÊÊÊÊÊÊÊÊÊÊÊ trace("targ: "+s); ÊÊÊÊÊÊÊÊÊÊÊ while(time()<s) { ÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊ ++a; ÊÊÊÊÊÊÊÊÊÊÊ } ÊÊÊÊÊÊÊÊÊÊÊ trace("time: "+time()); ÊÊÊÊÊÊÊÊÊÊÊ trace("a: "+a); ÊÊÊÊÊÊÊ } ÊÊÊ } ÊÊÊ public static inline function time():float { ÊÊÊÊÊÊÊ #if flash ÊÊÊÊÊÊÊÊÊÊÊ return flash.lib.gettimer(); ÊÊÊÊÊÊÊ #elseif neko ÊÊÊÊÊÊÊÊÊÊÊ return sys.time()*1000; ÊÊÊÊÊÊÊ #elseif cpp ÊÊÊÊÊÊÊÊÊÊÊ return untyped __global__.__time_stamp()* 1000; ÊÊÊÊÊÊÊ #end ÊÊÊ }
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014293</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="chg" timestamp="Jan 15, 2014 1:13 AM">
<s>if you think scout can do that (it would seems reasonable that it could) why don't you try scout? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014332</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="imagenesis%20media" timestamp="Jan 15, 2014 1:39 AM">
<s>i'm not arguing with you.</s><s> of course one can presumably spend weeks going through the flash vm sources, operating system timer implemenations, setting up productive windows 7 systems to find out scout doesn't solve anything, learning c and c++ to a sufficient level, implementing an alternate browser plugin that doesn't have a retarded timing scheme, executing political manuevers at the w3 to standardize on a plugin, infiltrating apple to enable webgl in safari, resurrecting flash from the dead, resurrecting nappi from the dead, enabling aot typed javascript in all browsers and mobile, circumventing the app stores, engaging in military campaigns across the globe, implementing general artifical intelligence, implementing immortality.</s><s> all of these are things one can do, but right now i'm just soliciting information on a forum from perhaps people who know the deterministic behavior to save some time. 
1.</s><s> i am soliciting information about exhibited behavior.</s><s> i specified that i have exhibited 16ms delay but it appears that windows often returns consecutive milliseconds.</s><s> i am soliciting information such as: 
a. why flash randomly started returning 16ms intervals.</s><s> b. what is the expected behavior in a release flash player across operating systems?</s><s> c.</s><s> etc 
</s><s>i require understanding of the issue to it's conclusion because it is more effecient to fully understand the behavior instead of coming back to it in the future about an edge case with a blank mind about the context. 
2 i do not have a handy windows 7 installation so i am soliciting confirmation that scout does in fact facilitate microsecond delays. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014413</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="chg" timestamp="Jan 15, 2014 2:16 AM">
<s>a) why flash randomly started returning 16ms intervals.</s><s> i told you the 16ms frequency for ticks wasn't set in stone under windows and could be changed by programs, though that doing so would effect the entire os (it also drains battery faster on laptops i believe)... it is quite possible some program or driver is changing the frequency for you so sometimes when that program or driver runs (or after if it doesn't bother restoring the default) you see a different granulrity b. what is the expected behavior in a release flash player across operating systems?</s><s> no comment, i've observed it and seen it in the figures from others (not always 16ms) and understand why it is reasonable to expect in a product like flash player when running on windows eg. http://blogs.msdn.com/b/oldnewthing/archive/2005/09/02/459952.aspx 
i don't even regard something like that as wrong, and knowing what i do of windows i expect it, though i agree maybe it would be nice if it were documented... 
2 i do not have a handy windows 7 installation so i am soliciting confirmation that scout does in fact facilitate microsecond delays. 
</s><s>you said an staff member representing adobe said it did, who can act as a better authority than that (i can't) ? 
</s><s>as the product is intended for profiling it would be ridiculous (imho) for it not to use a preformance timer under windows to get more accurate timing than is practical in flash player (microseconds or better would be quite possible) so honestly, i do not see you have any reason to doubt that it should... it's a case of different os level tools being suitable to different jobs. 
</s><s>also this is just my opinion but if your targetting flash get a windows installation for testing... you probably shouldn't profile on an envirnoment that's not representative of your target audience.</s><s> as your developing in haxe you can always release a native version of your work for linux if you have to...</s><s> (please understand this isn't because i love windows, if you were targetting apple's ios or android you'd be wise to profile on representative hardware and devices and not go off of the preformance on a desktop or a simulator) 
</s><s>by the way, you do know what they say about "premature optimization" right? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014501</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="imagenesis%20media" timestamp="Jan 15, 2014 2:27 AM">
<s>premature opimization is the only way to hit 16ms? 
</s><s>this isn't premature trust me.</s><s> flash is sloooowwwwwwwww and my engine is already written. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014487</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="chg" timestamp="Jan 15, 2014 3:00 AM">
<s><quote>
<s>imagenesis media wrote: 
premature opimization is the only way to hit 16ms? 
</s><s>this isn't premature trust me.</s><s> flash is sloooowwwwwwwww and my engine is already written. 
</s></quote>avm2 probably probably very slow compared to alternatives like jvm, .</s><s>net's clr, v8/jgermonkey... but it's good enough for alot of indie games and web content that it is widely used (the web game market would seem to be staying in flash and not moving to html more quickly for other reasons) 
</s><s>optimisation (premature or otherwise) is the only way to hit 16ms doing... what?</s><s> i'm still not entirely sure what the general preformance issue your seeing is, the timer thing might seems to explain your attempts to pin point your issue... but that only means that you haven't explained what your real problem is (?</s><s>!</s><s>) 
</s><s>do also realize that this is a crossbridge / flascc forum, if your looking for a potential speed up one way to do it is to use the trick that they put in for us...</s><s> domain memory.</s><s> you can save a lot by bypassing the native type system, garbage collection, and all that... hint hint http://ncannasse.fr/blog/virtual_memory_api cough. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014569</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="imagenesis%20media" timestamp="Jan 15, 2014 3:04 AM">
<s>thanks for your help.</s><s> i wish i knew what my problem is.</s><s> i'm still working on getting profiling working. 
</s><s>on linux it's quite obvious my problem is that linux flash is very slow. 
</s><s>on windows, it's absolutetly amazing how much faster it is. 
</s><s>in general at the moment my problem is hitting 16ms on table layout validation (a table layout with elements that have): 
1) a texture background 2) percent dimensions 
the code is quite nice and has a validation model logically more performant than flex's component models.</s><s> the performance of child dimension validations work fine.</s><s> it would appear that most of the time is spend in validating the background textures but i'm not sure. 
</s><s>anyway, i do not require assistence in actually coming up with a logically optimal implementation, just profiling hence this thread. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010133-6014665</DOCNO>
<TEXT>
<subject>AVM2 JIT invalidation/recompilation</subject>
<post author="chg" timestamp="Jan 15, 2014 3:40 AM">
<s><quote>
<s>imagenesis media wrote: 
linux flash is very slow. 
</s></quote>just to double check here: you didn't install the debugging version of the player, it is alot slower... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5739948-1310272</DOCNO>
<TEXT>
<subject>Does FlasCC provide better performance than ActionScript Code?</subject>
<post author="freetop_gl" timestamp="Oct 6, 2013 6:58 PM">
<s>does flascc provide better performance than actionscript code?</s><s> if it does, how much ? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5739948-5753280</DOCNO>
<TEXT>
<subject>Does FlasCC provide better performance than ActionScript Code?</subject>
<post author="twistedjoe" timestamp="Oct 11, 2013 8:09 AM">
<s>it would depend on which operation i guess. 

</s><s>you should do benchmark and profile for your specific use case.</s><s> for most case, i would say no. anyway you probably should not consider flascc for performance.</s><s> as you would not gain much or even lose.</s><s> you should consider it for portability (if you already have an existing c++ codebase for example). 
i am talking here about cpu performance.</s><s> for gpu performance you could look into stage3d if you haven't yet.</s><s> that should give you a real performance boost if you bottleneck on graphics and know what you are doing. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5739948-5769576</DOCNO>
<TEXT>
<subject>Does FlasCC provide better performance than ActionScript Code?</subject>
<post author="_falcan0" timestamp="Oct 18, 2013 12:55 AM">
<s>i'm working on rewriting gif encoder and just by rewriting to flascc so far the speed increased 2.5x - it's very specific of course, from what i understand the main speedup is happening because of domain memory (faster memory access).</s><s> but could it be also because of llvm optimizing the whole thing?</s><s> not sure, but definitely if you're working with memory access, which is typical for various encoders, i'd recommned it. 
</s><s>this is known since alchemy(flascc 1), the alchemy jpeg encoders always performed better than their as3 counterparts... 
</s><s>as a bonus, once you rewrite your code to (cross-platform) c/c++ you can create native extensions out of it. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5739948-5782298</DOCNO>
<TEXT>
<subject>Does FlasCC provide better performance than ActionScript Code?</subject>
<post author="freetop_gl" timestamp="Oct 23, 2013 8:37 AM">
<s>thanks ,now i got it. actionscript is slower , because of the low performance of accessing memory, and also float proccessing. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5739948-6010296</DOCNO>
<TEXT>
<subject>Does FlasCC provide better performance than ActionScript Code?</subject>
<post author="chg" timestamp="Jan 14, 2014 12:41 AM">
<s>crossbridge/flascc pros/cons (for preformance) 
</s><s>pro: uses bytearray and domain memory 'naturally' (and for pretty much everything) which speeds up memory access greatly 
con: function call overhead, implementation uses it's own stack and virtual x86-based registers implemented as as3 members of c_run, has to wrap calls to handle points to functions, variables placed onto the stack require alignment - 16byte alignment is used (a carry over from x86 where this was introducted for simd data to be placed on the stack and meet the necessarily alignment criteria of hardware) - ie. lots more instructions to do a function call then as3 would have to do 
pro: highly optimising toolchain, does aggressive inlining and code optimisation 
con: many gotchas, difficult to work with as3 types that don't fit into a bytearray, to some extent you can use as3 directly using inline assembly but you will end up doing more than the straight as3 code would when it comes to passing variables around, say between functions.</s><s> i haven't benchmarked strings, but i'd be surprized if the as3 string class didn't preform better for general use... 
</s><s>as3 pros/cons (for preformance) 
</s><s>pro: technically, anything you can get out of crossbridge you can write in as3 by hand.</s><s> you can write even better code because what you can write in as3 is a superset of what you can produce with crossbridge. 
</s><s>con: writing the high proforming code described above will be extremely tedious and look ugly, the compiler does a little more optimisation and inline than it used to but it won't help you write high the preforming bytearray stuff crossbridge does at all; however the benefit of the optimisations will vary so you maybe 90% of the wins will come from hand optimising 10% of the code base... 
</s><s>pro: function calls should be cheaper (than crossbridge), as well it's easy use of native as3 objects when they suit the solution 

...and haxe is probably about 1/2 way between those i suspect (lol) 

</s><s>so in conclusion i don't think it obvious that one is always going to be faster than the other (at least to me).</s><s> there are certainly some amazing wins to be had with crossbridge though...</s><s> i recently looked at the proformance of sorting several million integers, though it seems there is native (non-avm2) code doing the sorting when you make the correct method calls on an array or vector, you can beat it with a qsort on a domain memory bytearray! 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5739948-6010711</DOCNO>
<TEXT>
<subject>Does FlasCC provide better performance than ActionScript Code?</subject>
<post author="_falcan0" timestamp="Jan 14, 2014 4:24 AM">
<s>thanks chg that's a very nice comparsion and confirms stuff i've seen so far with crossbridge/flascc.</s><s> including the virtual x86 based registers when you view the disassembled code.</s><s> its pretty fun, i was mixing trace statements with the "assembler" when i was debugging one very nasty bug, as its all still as3 lol. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-1379095</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="moonwith" timestamp="Jan 14, 2014 1:05 AM">
<s>as you kown, flash cc code can play with domain meory,but how it could access the as3 general memory imediately.</s><s> for example, i have a as3 bytearray var and i want to encripyt it with c++ on flash cc.the common solution is copy this bytearray to domain memory.with the encripter worked under c++ processed, the result is copyed back.that seems cost a lot of cpu time for memory operation.so i wonder c++ code access the bytearray without extra operation like memory-copy.</s><s> so, how?</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010386</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="chg" timestamp="Jan 14, 2014 1:29 AM">
<s>you can change the bytearray associated with domainmemory, but you can not associate multiple bytearray objects - ie. the fast memory opcodes you c++ code will compile will only execute on the bytearray associated with domainmemory. 
</s><s>while it is possible to change the bytearray used as domainmemory, not forget it is storing a lot necessary stuff that your c++ code depends on (and as a result will likely crash quickly if you did change the bytearray set for domain memory without copying all of the one used by crossbridge and updating the global as3 variable in the c_run package as it is used by some on the helper functions!</s><s>).</s><s> crossbridge uses the bytearray to hold the stack, the heap, constant values used to initialise variables, almost everything... 
</s><s>if possible, i would try and make actionscript use the same bytearray used by your crossbridge compiled module, obviously with an embed class this is unachieve (maybe possible to change llc to output different code to do it somehow i suspect).</s><s> an example of a as3 call which can share the bytearray used by crossbridge is vertexbuffer3d.uploadfrombytearray() and anything where you obviously have total control over the as3 code...</s><s> (at least to secify how it should talk to you) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010428</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="moonwith" timestamp="Jan 14, 2014 1:42 AM">
<s>it sounds a bit headache.</s><s> so changing bytearray associated with domainmemory will cause all bytearray objects using domainmemory,does it?</s><s> is there some paper or example talking abount how to play with above.</s><s> thanks a lot.</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010430</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="moonwith" timestamp="Jan 14, 2014 1:46 AM">
<s>could you please give the url about the implementation of vertexbuffer3d.uploadfrombytearray()?i wound check it out. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010432</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="moonwith" timestamp="Jan 14, 2014 1:50 AM">
<s>i doubt that vertexbuffer3d.uploadfrombytearray() function do not access domain memory.</s><s> it just pass the as3 bytearray to gpu memory directly. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010390</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="chg" timestamp="Jan 14, 2014 1:52 AM">
<s>use of domain memory is well documented now for as3 programmers http://help.adobe.com/en_us/flashplatform/reference/actionscript/3/fla sh/system/applicationdomain.html 
if you use crossbridge, don't change it (unless your crossbridge code has finished running and no part will be re-run until you put it back the way you found it), even thinking about it will make you pull your hair out as you dig into crossbridge's internals... that way madness lies. 
</s><s>also, as i mentioned, only one bytearray object can be set to act as the domain memory at a time, so it doesn't really help you in the case of copying one bytearray to another (switching domain memory isn't that cheap either, you don't want to say try doing it lots of times a second i suspect). 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010434</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="moonwith" timestamp="Jan 14, 2014 1:54 AM">
<s>yeah, i got it.</s><s> many thanks. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010393</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="chg" timestamp="Jan 14, 2014 2:00 AM">
<s><quote>
<s>moonwith wrote: 
i doubt that vertexbuffer3d.uploadfrombytearray() function do not access domain memory.</s><s> it just pass the as3 bytearray to gpu memory directly. 
</s></quote>it was an example of a function you can call from say inlineasm and tell it to use te same bytearray as what you are using for memory with crossbridge compiled code.</s><s> (because it takes an offset, which is the same as a crossbridge pointer), assuming inlineasm as3 the bytearray argument would be something like cmodule.ram() (look in cmodule.as for the crossbidge code) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6010332-6010470</DOCNO>
<TEXT>
<subject>how to control domain memory and flash general memory?</subject>
<post author="moonwith" timestamp="Jan 14, 2014 2:06 AM">
<s>this is helpful.i will learn deep into the issue.</s><s> thanks.</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5956981-1365190</DOCNO>
<TEXT>
<subject>Fonts and Flash++.h</subject>
<post author="valichek" timestamp="Dec 25, 2013 11:47 PM">
<s>is it possible to compile (g++) otf/ttf font and use it with flash.display.textfield from as3++.h for bitmapdata.draw() inside shell c++ executable binary? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5956981-6002650</DOCNO>
<TEXT>
<subject>Fonts and Flash++.h</subject>
<post author="chg" timestamp="Jan 10, 2014 8:58 PM">
<s><quote>
<s>valichek wrote: 
is it possible to compile (g++) otf/ttf font and use it with flash.display.textfield from as3++.h for bitmapdata.draw() inside shell c++ executable binary? 
</s></quote>no. 
<quote>
<s>valichek wrote: 
is it possible to compile (g++) otf/ttf font 
</s></quote>you can likely store the bytes from the font file in your program if you want (eg. as literal data on a c constant "string", in a custom ".data" segment in the fake sections the linker simulates with wrapper code to appear like the c/c++ code is being run from an elf executable, or as a custom section of the swf container) 
<quote>
<s>valichek wrote: 
use it with flash.display.textfield from as3++.h for bitmapdata.draw() inside shell 
</s></quote>that's just a header file, i don't think shell implements the flash player runtime, i'm pretty sure it's a commandline only runtime but you have less restrictions on things like accessing files on the system. 

<quote>
<s>valichek wrote: 
inside shell c++ executable binary? 
</s></quote>i think shell targets still produce actionscript byte-code (abc), but they are run under the tamarin project's avm shell rather than on the flash player, i get the impression you may have been incorrectly thinking native x86 code is compiled (?</s><s>) if so maybe adobe air more like what you are looking for, it does require a runtime environment to be installed on desktops (not that that should be a dealbreaker) but i think it does allow you to make native compilations of say flash games for mobile with a bit of work. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5956981-6006828</DOCNO>
<TEXT>
<subject>Fonts and Flash++.h</subject>
<post author="valichek" timestamp="Jan 13, 2014 1:42 AM">
<s>all i want is to get server side util to generate png's with text identical to the rendered by the tlf in flash runtime. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5956981-6007158</DOCNO>
<TEXT>
<subject>Fonts and Flash++.h</subject>
<post author="chg" timestamp="Jan 13, 2014 5:20 AM">
<s><quote>
<s>valichek wrote: 
all i want is to get server side util to generate png's with text identical to the rendered by the tlf in flash runtime. 
</s></quote>
</s><s>that's fine but crossbridge (aka flascc) doesn't have any features that would seem remotely relevant to that, so this is clearly not the right forum or forum area to try and get assistance with doing that. 
</s><s>crossbridge is just a compiler technology that takes c/c++ code and outputs actionscript / actionscript bytecode code to run inside flash player (or a shell avm2 envirnoment such as tamarin). 
</s><s>as the tlf library itself is open source, maybe you should look through the code and see exactly what it can and can't do for you (ie. what bits the library calls a lowlevel to handle)... the source is available from the sourceforge project here: http://sourceforge.net/adobe/tlf/home/home/ 
note: this is an actionscript library, not a c/c++ library.</s><s> while an install of crossbridge can compile this, it will use the actionscript compiler to build it and you might just as well use the non-crossbridge one. 
</s><s>maybe you will be able to suppliment what's missing with other components or your own code and run the tamerin on your server?</s><s> ie.</s><s> i presume the library gets flash/flex to do rendering, but maybe you can rig up some code to trick it into outputing commands to something like imagemagik instead; 2 different text rendering engines aren't going to produce pixel identical output; but you can probably get it to look close enough... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5956981-6007196</DOCNO>
<TEXT>
<subject>Fonts and Flash++.h</subject>
<post author="valichek" timestamp="Jan 13, 2014 5:44 AM">
<s>chg, i understood that there is no way to solve my problem with tamarin, anyway, thank you for the help. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6000698-1376509</DOCNO>
<TEXT>
<subject>Is it possible to pass AS3 function as parameter to C/C++ function?</subject>
<post author="w-v-i" timestamp="Jan 10, 2014 8:40 AM">
<s>hi everybody, i've got probably very simple question but i still haven't figured out a solution.</s><s> is it possible to pass as3 function as a paramter to c/c++ code as a callback function, i'd like to call some as3 function inside c/c++.</s><s> i don't know the name or class of the as3 code.</s><s> basically i'm asking how to pass as3 function pointer to a c/c++ function. 
</s><s>thanks for any help. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6000698-6002640</DOCNO>
<TEXT>
<subject>Is it possible to pass AS3 function as parameter to C/C++ function?</subject>
<post author="chg" timestamp="Jan 10, 2014 8:17 PM">
<s>yes and no...</s><s> 
</s><s>yes... you can include "as3++.h" and define a variable as type as3::local::var which lets you work with native actionscript variables of any type.</s><s> eg. void somecppfn(as3::local::var as3callbackfn) you can test the var you are passed really is an as3 function by calling: as3::local::internal::instanceof(as3callbackfn, as3::local::internal::getlex(as3::local::internal::new_string("functi on"))) and you can then call the as3 function using as3::local::internal::call() or as3::local::internal::call_v() for more info see: http://www.adobe.com/devnet-docs/flascc/docs/capidocs/as3plusplus.html 
no... it won't actually be true function pointer to an as3 function, because these types can't actually be stored in the bytearray class that is used to emulate memory for crossbridge (aka flascc) compiled code, instead when you use the magic as3++ stuff some special actionscript glue code keeps track of the data in some as3 dictionary objects, and gives you a reference that it can use to retrieve objects for you. 
</s><s>you can see the implementation of the glue code here if you are interested (flascc was renamed to crossbridge when it was made open source by adobe ): https://github.com/adobe-flash/crossbridge/blob/master/posix/as3%2b%2b .cpp and https://github.com/adobe-flash/crossbridge/blob/master/posix/as3%2b%2b .impl.cpp 
another alternative might be to just use inline actionscript liberally yourself and use to implement your own simpler stack of as3 objects in a global as3 array() object to hold the actual objects.</s><s> you can use the "package_as3()" macro to write inline actionscript outside of function/block scope (ie. in as3's global scope) as per http://www.adobe.com/devnet-docs/flascc/docs/reference.html (or you can add actionscript ".as" source files to your makefile/buildscripts and "import" the package in your inline assembly block just before you use anything from your custom actionscript package) and ofcouse there's inline_as3() / inline_nonreentrant_as3 for regular inline as3...</s><s> (assuming you've seen/used enough already, if not maybe take a look at "samples/02_interop/hellointerop.c" from you installation of crossbridge) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-6000698-6006867</DOCNO>
<TEXT>
<subject>Is it possible to pass AS3 function as parameter to C/C++ function?</subject>
<post author="w-v-i" timestamp="Jan 13, 2014 2:43 AM">
<s>thanks a lot, i was fiddling with it in this direction but could make it work, this really helps. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5534282-1261589</DOCNO>
<TEXT>
<subject>GameInput in CrossBridge</subject>
<post author="agwinnell" timestamp="Jul 24, 2013 7:37 AM">
<s>hi there, 
i've been fiddling with the latest flash player 11.8 to make controllers work in my projects.</s><s> i have had success implementing the api on windows in flashdevelop with a normal as3 project.</s><s> however when i try to compile the same selection of code with crossbridge (os x), i get errors. 
</s><s>is gameinput supported in crossbridge yet? 
</s><s>as3 code: http://pastebin.com/4katzdfi 
you can see a bunch of empty functions at the top -- these will call the c++ native functions once my console.as compiles.</s><s> i definitely haven't missed the import statement.</s><s> this is using the latest flex 4.6 and the latest crossbridge 
if there's anything else i can give you to help this issue, let me know.</s><s> cheers!</s><s> 
-- 
</s><s>the errors are: 
error: access of possibly undefined property id through a reference with static type gameinputcontrol. _controls[i] = control.id; ^ 

/users/name/dropbox/ark2d-examples/defaultgame/build/flascc/console.as :1124 error: access of possibly undefined property minvalue through a reference with static type gameinputcontrol. ongamepadaxisattached(k, getaxisid(control), control.minvalue, control.maxvalue); ^ 

/users/name/dropbox/ark2d-examples/defaultgame/build/flascc/console.as :1124 error: access of possibly undefined property maxvalue through a reference with static type gameinputcontrol. ongamepadaxisattached(k, getaxisid(control), control.minvalue, control.maxvalue); ^ 

/users/name/dropbox/ark2d-examples/defaultgame/build/flascc/console.as :1128 error: implicit coercion of a value of type vector.<string> to an unrelated type vector.<int>. device.startcachingsamples(30, _controls); ^ 

/users/name/dropbox/ark2d-examples/defaultgame/build/flascc/console.as :1163 error: access of possibly undefined property id through a reference with static type gameinputcontrol. if (control.id.indexof("button_") != -1) { ^ 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5534282-5782696</DOCNO>
<TEXT>
<subject>GameInput in CrossBridge</subject>
<post author="Jimmy%20Slam" timestamp="Oct 23, 2013 10:46 AM">
<s>i also have the same problem but only sometimes.(yeah sometimes compiles and sometimes doesn't) i use asc compiler. 
i would like to know what is going on... 

---------------------------------------------------------------------- ------------------------------- and now...i 'm sorry this is a bit off - topic but i feel i have to say it somewhere... ---------------------------------------------------------------------- ------------------------------- 

</s><s>this post has 250 views and no answers....</s><s> adobe you are killing flash....</s><s> you release new versions but you give zero support. 
</s><s>also, you don't even provide information for the following version.</s><s> if you don't do somethng soon we are all going to end up with unity as your tools are pretty outdated and we have to code everything, unity has a much more efficient interface.</s><s> unity is what flash should be ...</s><s> shame on you for killing what madromedia built.</s><s> you only added gpu support and kinetiks in almost 10 years...</s><s> you should be ashamed. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5534282-5822133</DOCNO>
<TEXT>
<subject>GameInput in CrossBridge</subject>
<post author="cbakgly" timestamp="Nov 6, 2013 10:12 PM">
<s>to be precise, all your c/c++ code will be compiled into actionscript.</s><s> that means c/c++ code will end up like calling some as interface to do the gameinput stuff. 
</s><s>using crossbridge doesn't mean your interacting comes from os directly, but mean that you can replace part of as code with c/c++ code for a performance enhancing. 
</s><s>so why bother waiting for a c/c++ interface if you just don't use c/c++? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5534282-6002651</DOCNO>
<TEXT>
<subject>GameInput in CrossBridge</subject>
<post author="chg" timestamp="Jan 10, 2014 9:58 PM">
<s>maybe it's too late to answer but it looks like the errors you are getting from the actionscript compiler are frankly quite valid. 
</s><s>for example the first error you list is telling you that the local variable "control" which is a gameinputcontrol instance, doesn't have an id property for you to access and try and copy to , the documentation doesn't list any such property either: http://help.adobe.com/en_us/flashplatform/reference/actionscript/3/fla sh/ui/gameinputcontrol.html (at least for flash targets, if you enabled the air filter, note the air only icon next to mention of the id property, it means "air only" i believe) 
</s><s>if i were to guess at why your code sometimes compiles, but other times doesn't, i'd guess that the difference would likely be whether you tell the compiler to be "strict" or not, when you enable "strict" mode you are telling the compiler to be extra picky during compilation and not allow code with issues such as this to compile...</s><s> if your wondering why would you want the compiler not to compile your code and be extra picky, the answer is that this often heps you to discover bugs and issues in your program early! 
</s><s>so, remove the "strict" option if you want asc2 to ignore the references to properties that it sees as not being valid, that will mean that it will compile your actionscript.</s><s> however as long as adobe hasn't implemented the properties you use in the flash player or the player you have targeted, then game controllers won't actually work. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5987532-1373186</DOCNO>
<TEXT>
<subject>How to omit trace statements by gcc?</subject>
<post author="Justin Chiu" timestamp="Jan 6, 2014 8:29 PM">
<s>hi 
</s><s>my project only use gcc without mxmlc.</s><s> is there any gcc flag like -compiler.omit-trace-statements to disalbe all the trace statements ? 
</s><s>thanks 
</s><s>justin 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-1156457</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Feb 19, 2013 2:33 PM">
<s>i'm trying to create a flex project that loads the pthread.swc from sample 09_pthreads and also uses pthread_swc.as from that same sample project.</s><s> i've set the minimum required flash player version to 11.6.0 and copied the appropriate playerglobal.swc to my sdk folder.</s><s> when i run the application, which creates an instance of the pthread_swc sprite, i get a "casi32 not defined" error.</s><s> this is supposed to work, right? 
</s><s>my flash builder project is available here: https://dl.dropbox.com/u/43279937/testflascc.zip 
playerglobal.swc came from here: http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions. html 
output of my application, showing flash player version: win 11,6,602,168 main run 
referenceerror: error #1065: variable avm2.intrinsics.memory::casi32 is not defined. at global/sample.pthread::f_avm2_cmpswapuns() at global/sample.pthread::f_atomic_fetchadd_int() at global/sample.pthread::f__thr_alloc() at global/sample.pthread::f__libpthread_init() at global/sample.pthread::f__pthread_create() at global/sample.pthread::f_main() at global/sample.pthread::f__start1() at sample.pthread::cmodule$/calli() at sample.pthread::cmodule$/start() at sample.pthread::cmodule$/startasync() at pthread_swc/initcode()[c:\temp\testflascc\src\pthread_swc.as:43] [...</s><s>] 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5086239</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="Shongrunden" timestamp="Feb 19, 2013 2:45 PM">
<s>does this blog post help? 
http://blogs.adobe.com/flascc/2013/01/11/troubleshooting-error-1065/ 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5086445</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Feb 19, 2013 3:41 PM">
<s>no because it only suggests that my flash player version is below 11.5, which is incorrect.</s><s> in my original post i included my flash player version: win 11,6,602,168 as output by the sample code i have provided (using flash.system::capabilities.version). 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5086406</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="Shongrunden" timestamp="Feb 19, 2013 3:58 PM">
<s>which browser are you using?</s><s> the post also mentions it is not supported in chrome yet. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5086453</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Feb 19, 2013 4:00 PM">
<s>i've tried it in firefox and ie, both of which are running debugger versions of flash player. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5086655</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="Shongrunden" timestamp="Feb 19, 2013 5:35 PM">
<s>it looks like you are compiling with rsls.</s><s> try building the flex project without rsls (project > properties > flex build path > framework linkage) and see if that helps. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5086727</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Feb 19, 2013 5:57 PM">
<s>i tried building without rsls but there was no change.</s><s> i did find a solution to the casi32 problem, though.</s><s> i added -swf-version=18 to the compiler options and i no longer receive the error.</s><s> someone should add that to the blog post about error 1065. 
</s><s>however, now i have a new problem, which is more coding related: the main thread is an application that adds an instance of pthread_swc to the stage, which spawns worker 1.</s><s> worker 1 attempts to create another application instance, which causes the following error: 
error: error #3731: this feature is not available within this context. at spark.components::application/initcontextmenu()[e:\dev\4.y\frameworks \projects\spark\src\spark\components\application.as:1772] at spark.components::application/initialize()[e:\dev\4.y\frameworks\proj ects\spark\src\spark\components\application.as:1353] [...</s><s>] 
</s><s>i'm assuming that worker 1 is creating an application because it's a copy of the current swf, which is based on an application.</s><s> is there a way to tell the worker 1 to use pthread_swc in place of the application?</s><s> in pthread_swc.initcode(), it says cmodule.rootsprite = this, but that doesn't seem to fix it. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5087043</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="alexmac%40adobe.com" timestamp="Feb 19, 2013 10:01 PM">
<s>it looks like the version of flex you are using in this worker isn't compatible with workers as its trying to do something with apis that aren't supported in workers...</s><s> i'm not sure if this is fixed in more recent versions, or if its something the new open source flex project is looking at. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5089286</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Feb 28, 2013 12:54 PM">
<s>that makes sense.</s><s> i tried the new apache sdk and the problem still exists in the application class. 
</s><s>i've stopped using the application class and now i'm just trying to run pthread_swc.as as the main sprite in a flex project.</s><s> the code is unmodified from the 09_pthread sample provided with flascc.</s><s> i'm seeing the following in the console: 
[swf] c:\temp\testflascc\bin-debug\pthread_swc.swf - 1,159,257 bytes after decompression
main run
[swf] c:\temp\testflascc\bin-debug\pthread_swc.swf - 1,159,257 bytes after decompression
error: error #1502: a script has executed for longer than the default timeout period of 15 seconds.
    at flash.concurrent::condition/wait()
    at global/sample.pthread::threadarbcondwait()
    at global/sample.pthread::f_avm2_msleep()
    at global/sample.pthread::f_kmsleep()
    at global/sample.pthread_ern_umtx_2e_o_3a_b7bb8105_2d_fdc5_2d_41ea_2d_8972_2d_5a8e5fe0a85e::f_do_wait()
    at global/sample.pthread_ern_umtx_2e_o_3a_b7bb8105_2d_fdc5_2d_41ea_2d_8972_2d_5a8e5fe0a85e::f___umtx_op_wait()
    at global/sample.pthread::f_k_umtx_op()
    at global/sample.pthread::f__umtx_op()
    at global/sample.pthread::f__thr_umtx_wait()
    at global/sample.pthread_hr_join_2e_o_3a_cc2c557b_2d_c849_2d_41ab_2d_b34e_2d_57c6fff2ac61::f_join_common()
    at global/sample.pthread::f__pthread_join()
    at global/sample.pthread::f_pthread_join_exp()
    at global/sample.pthread::f_main()
    at global/sample.pthread::f__start1()
    at sample.pthread::cmodule$/calli()
    at sample.pthread::cmodule$/start()
    at sample.pthread::cmodule$/startasync()
    at pthread_swc/initcode()[c:\temp\testflascc\src\pthread_swc.as:43] 
</s><s>flash builder 4.7 flex sdk 4.6 (also tried apache flex 4.9) minimum flash player 11.6.0 (running win 11,6,602,168 debug in firefox) framework linkage "merged into code" tried -swf-version=18 and 19 project available here: https://dl.dropbox.com/u/43279937/testflascc.zip playerglobal.swc 11.6 copied from here: http://helpx.adobe.com/flash-player/kb/archived-flash-player-versions. html 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5111565</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Feb 28, 2013 12:54 PM">
<s>i just found out from a colleague of mine that the sample 9 output pthread_swc2.swf does not work at all.</s><s> this is essentially what i'm trying to accomplish with my flash builder tests. 
</s><s>here's the section of the makefile (from sample 9) that builds pthread_swc2.swf: 
swctest:
</s><s>    "$(flascc)/usr/bin/g++" $(base_cflags) -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>    "$(flascc)/usr/bin/g++" $(base_cflags) -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>    "$(flex)/bin/mxmlc" -library-path=pthread.swc -debug=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf 
to build the file, i'm typing the following in cygwin: 
make swctest flex="/cygdrive/c/flex" flascc="/cygdrive/c/flascc/sdk" 
</s><s>when i try to open pthread_swc2.swf in firefox or ie, the browser freezes and eventually i get this error: error: error #1502: a script has executed for longer than the default timeout period of 15 seconds.
    at flash.concurrent::condition/wait()
    at global/sample.pthread::threadarbcondwait()
    at global/sample.pthread::f_avm2_msleep()
    at global/sample.pthread::f_kmsleep()
    at global/sample.pthread_ern_umtx_2e_o_3a_b7bb8105_2d_fdc5_2d_41ea_2d_8972_2d_5a8e5fe0a85e::f_do_wait()
    at global/sample.pthread_ern_umtx_2e_o_3a_b7bb8105_2d_fdc5_2d_41ea_2d_8972_2d_5a8e5fe0a85e::f___umtx_op_wait()
    at global/sample.pthread::f_k_umtx_op()
    at global/sample.pthread::f__umtx_op()
    at global/sample.pthread::f__thr_umtx_wait()
    at global/sample.pthread_hr_join_2e_o_3a_cc2c557b_2d_c849_2d_41ab_2d_b34e_2d_57c6fff2ac61::f_join_common()
    at global/sample.pthread::f__pthread_join()
    at global/sample.pthread::f_pthread_join_exp()
    at global/sample.pthread::f_main()
    at global/sample.pthread::f__start1()
    at sample.pthread::cmodule$/calli()
    at sample.pthread::cmodule$/start()
    at sample.pthread::cmodule$/startasync()
    at pthread_swc/initcode()[c:\flascc\samples\09_pthreads\pthread_swc.as:43] 
</s><s>has anyone been able to run pthread_swc2.swf successfully? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5120756</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="stick158" timestamp="Mar 4, 2013 11:55 AM">
<s>i just wanted to make a note that when i tried to run this example code i ran into a few errors.</s><s> hope this might help anyone else out that is having trouble with 09_pthreads.</s><s> compiling this from the command line, mxmlc gave me an error "could not find c://blah/blah/jvm.dll".</s><s> i did indeed have java installed and a java_home environment variable.</s><s> by default, $(flex)/bin/mxmlc is a unix script that will try to run a jar file (which will fail in windows).</s><s> to fix, in the command line just replace "$(flex)/bin/mxmlc" with "$(flex)/bin/mxmlc.exe" if you are on windows.</s><s> after that, i tried running the exe directly and came up with an error "missing msvcr71.dll".</s><s> google that and you should be able to download msvcr71.dll from countless sites.</s><s> make sure to put that in c:/windows/system32/ and c:/windows/syswow64 if you're running 64-bit. 
i was able to successfully compile the 09_pthreads swctest but alas, i also got that same error when trying to run pthread_swc2.swf. 
</s><s>does anybody else have any insight to this? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5142368</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="ilookha" timestamp="Mar 12, 2013 11:43 AM">
<s>yes, sample 09_pthreads compiles and runs fine for me.</s><s> both pthread_swc1 and pthread_swc2 execute fine.</s><s> some notes regarding the setup: 1.</s><s> you don't need java_home.</s><s> you just need java.exe to be in your path.</s><s> you can either change a system-wide path variable, or modify it from within a bash session.</s><s> 2. mxmlc is a shell script, and it is supposed to be run from a cygwin bash shell.</s><s> do everything from the bash shell, not from windows command line.</s><s> so there's no need to replace mxmlc with mxmlc.exe.</s><s> 3. mxmlc uses a configuration file, which (in case of flex 4.6 that i'm using) has outdated flash player version and playerglobal.swc.</s><s> it might be irrelevant, but i've edited frameworks/flex-config.xml, and since the sample works for me, this might as well be the reason.</s><s> look for these lines: 
<!-- specifies the minimum player version that will run the compiled swf. --> <target-player>11.1</target-player> <!-- specifies the version of the compiled swf -->


<swf-version>14</swf-version> 
</s><s>and update them with at least 11.5 and 18 accordingly.</s><s> then add a corresponding playerglobal.swc to frameworks/libs/player/<player_version>. 
</s><s>after this has been done, here's my full cycle of compiling this sample: run myflasccroot/cygwin/bin/bash.exe export path=$path:/cygdrive/c/myflasccroot/cygwin/bin:/cygdrive/c/myjavaroot /x64/bin cd /cygdrive/c/myflasccroot/samples/09_pthreads make swctest flascc=/cygdrive/c/myflasccroot/sdk flex=/cygdrive/c/myflexroot 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5143791</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="cbakgly" timestamp="Mar 12, 2013 10:37 PM">
<s>@adufilie though i didn't look into your demo, did you try as3_goasync()?</s><s> after you did necessary preparations, put your function going on background to release the ui thread. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5144945</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Mar 13, 2013 8:47 AM">
<s>@cbakgly, i am using the exact code included in sample #9 (pthread_swc.cpp), and it does contain that function call but it never gets to that line because it never gets past pthread_join(). 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5145097</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Mar 13, 2013 9:38 AM">
<s>@ilookha, i just tried your suggestions and there was no change.</s><s> when i open pthread_swc2.swf in firefox running the newest version of flash player, it freezes on pthread_join() in main() of pthread_swc.cpp and eventually times out. pthread_swc1.swf works fine, by the way. 
</s><s>can you please provide your pthread_swc2.swf that has been verified to work so that i may test it? 
</s><s>here are my output files: https://dl.dropbox.com/u/43279937/09-pthreads-output.zip direct link to non-working swf: https://dl.dropbox.com/u/43279937/pthread_swc2.swf 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5145363</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="ilookha" timestamp="Mar 13, 2013 10:34 AM">
<s>yep, tried your pthread_swc2.swf - and it blocks forever in pthread_join.</s><s> so the problem is in the compilation settings. 
</s><s>here are my binaries: https://www.dropbox.com/s/rdnusvvexutbmif/pthread_swc1.swf https://www.dropbox.com/s/zwe1hs4gu27610n/pthread_swc2.swf 
they've been built with flascc 1.0.0. 
</s><s>note that pthread_swc2.swf doesn't write any output to the console textview, but you can see it working by reading trace() output in flashlog.txt. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5145727</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Mar 13, 2013 12:37 PM">
<s>thanks - your output file works here.</s><s> next thing we'll try is a fresh install of flascc + flex sdk on a new machine. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5156270</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="yutongzhang" timestamp="Mar 18, 2013 12:37 AM">
<s>@ilookha,@adufilie.</s><s> i met the same problem as you.what is your problem has been solved?please.</s><s> my code blocks forever in pthread_join and did not print any log in the new thread
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5174682</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Mar 24, 2013 12:46 PM">
<s>i uninstalled flash builder and removed all flex sdk and flascc installations.</s><s> i also made sure my environment variables didn't contain any reference to flex.</s><s> then, i installed flascc 1.0.1 and flex 4.6.</s><s> i tried many things and none worked -- pthread_swc2.swf always crashes and all i ever see in flashlog.txt is "main run".</s><s> below is a log from my cygwin shell. 

ilookha's working version was 457,860 bytes.</s><s> my output file size varied every time i compiled: (457969 bytes)(457971 bytes)(457955 bytes)(457968 bytes)(457972 bytes)(457971 bytes)(457965 bytes)(457968 bytes) 

</s><s>i'm out of ideas... why is the file size different every time?</s><s> how do i compile it the right way?</s><s> what is the exact process and what operating system should i use?</s><s> i'm currently running windows 7 on a 32-bit machine. 

</s><s>first run setup, please wait...
 
~~~ flascc sdk cygwin environment ~~~
 
</s><s>to compile the samples type the following command (replace the flex variable with the real path to your flex sdk):
make flascc="/cygdrive/c/flascc/sdk" flex="/path/to/flexsdk"
 
 
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples
$ cd 09_pthreads/
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make flascc="/cygdrive/c/flascc/sdk" flex="/cygdrive/c/flex4.6" swctest
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>"/cygdrive/c/flex4.6/bin/mxmlc" -library-path=pthread.swc -debug=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf
loading configuration file c:\flex4.6\frameworks\flex-config.xml
c:\flascc\samples\09_pthreads\pthread_swc.as: warning: this compilation unit did not have a factoryclass specified in frame metadata to load the configured runtime shared libraries.</s><s> to compile without runtime shared libraries either set the -static-link-runtime-shared-libraries option to true or remove the -runtime-shared-libraries option.
 
</s><s>c:\flascc\samples\09_pthreads\pthread_swc2.swf (457969 bytes)
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make clean
rm -f *.swf
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ rm -f *.swc
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make flascc="/cygdrive/c/flascc/sdk" flex="/cygdrive/c/flex4.6" swctest
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>"/cygdrive/c/flex4.6/bin/mxmlc" -library-path=pthread.swc -debug=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf
loading configuration file c:\flex4.6\frameworks\flex-config.xml
c:\flascc\samples\09_pthreads\pthread_swc.as: warning: this compilation unit did not have a factoryclass specified in frame metadata to load the configured runtime shared libraries.</s><s> to compile without runtime shared libraries either set the -static-link-runtime-shared-libraries option to true or remove the -runtime-shared-libraries option.
 
</s><s>c:\flascc\samples\09_pthreads\pthread_swc2.swf (457971 bytes)
 
 
********************
***** after fixing the previous warning about factoryclass (by adding -static-link-runtime-shared-libraries=true):
 
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make flascc="/cygdrive/c/flascc/sdk" flex="/cygdrive/c/flex4.6" swctest
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>"/cygdrive/c/flex4.6/bin/mxmlc" -library-path=pthread.swc -debug=true -static-link-runtime-shared-libraries=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf
loading configuration file c:\flex4.6\frameworks\flex-config.xml
c:\flascc\samples\09_pthreads\pthread_swc2.swf (457955 bytes)
 
 
********************
** changed c:\flex4.6\frameworks\flex-config.xml using ilookha's instructions
** downloading playerglobal11_6.swc for 11.6 from here: 
** copied to c:\flex4.6\frameworks\libs\player\11.6\playerglobal.swc
 
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make clean
rm -f *.swf
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ rm -f *.swc
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make flascc="/cygdrive/c/flascc/sdk" flex="/cygdrive/c/flex4.6" swctest
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>"/cygdrive/c/flex4.6/bin/mxmlc" -library-path=pthread.swc -debug=true -static-link-runtime-shared-libraries=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf
loading configuration file c:\flex4.6\frameworks\flex-config.xml
c:\flascc\samples\09_pthreads\pthread_swc2.swf (457972 bytes)
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ export path="$path:/cygdrive/c/flascc/cygwin/bin:/cygdrive/c/program files/ja
va/jre6/bin"
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make clean
rm -f *.swf
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ rm -f *.swc
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make flascc="/cygdrive/c/flascc/sdk" flex="/cygdrive/c/flex4.6" swctest
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>"/cygdrive/c/flex4.6/bin/mxmlc" -library-path=pthread.swc -debug=true -static-link-runtime-shared-libraries=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf
loading configuration file c:\flex4.6\frameworks\flex-config.xml
c:\flascc\samples\09_pthreads\pthread_swc2.swf (457971 bytes)
 
*********
*** no change .. just clean and build again
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make clean
rm -f *.swf
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ rm -f *.swc
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make flascc="/cygdrive/c/flascc/sdk" flex="/cygdrive/c/flex4.6" swctest
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>"/cygdrive/c/flex4.6/bin/mxmlc" -library-path=pthread.swc -debug=true -static-link-runtime-shared-libraries=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf
loading configuration file c:\flex4.6\frameworks\flex-config.xml
c:\flascc\samples\09_pthreads\pthread_swc2.swf (457965 bytes)
 
**** notice different file size.  is this normal?
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make clean
rm -f *.swf
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ rm -f *.swc
 
</s><s>andy@andy-pc /cygdrive/c/flascc/samples/09_pthreads
$ make flascc="/cygdrive/c/flascc/sdk" flex="/cygdrive/c/flex4.6" swctest
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swf -o pthread_swc1.swf
</s><s>"/cygdrive/c/flascc/sdk/usr/bin/g++" -werror -wno-write-strings -wno-trigraphs -pthread pthread_swc.cpp -emit-swc=sample.pthread -o pthread.swc
</s><s>"/cygdrive/c/flex4.6/bin/mxmlc" -library-path=pthread.swc -debug=true -static-link-runtime-shared-libraries=true -swf-version=18 pthread_swc.as -o pthread_swc2.swf
loading configuration file c:\flex4.6\frameworks\flex-config.xml
c:\flascc\samples\09_pthreads\pthread_swc2.swf (457968 bytes) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5200285</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="ilookha" timestamp="Apr 2, 2013 1:22 PM">
<s>flascc really needs a 64-bit os if you want to build anything sizeable, but this is probably not the cause of the issue. 
i dont have any more ideas either have you tried setting up the whole thing on a different machine? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5200272</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Apr 2, 2013 7:10 PM">
<s>we've tried it on four different machines, all failed in the same way: 1x windows 7 32bit 2x windows 7 64bit 1x osx 10.8.3 64bit 
</s><s>does yours give a different file size every time you compile? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5201299</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="ilookha" timestamp="Apr 2, 2013 9:18 PM">
<s>bizarre.</s><s> i've just tried building swctest on my home machine (win8 x64), with a clean flascc 1.0.0 installation: it produced a working swf.</s><s> i haven't even fixed target-player stuff in flex-config.xml, so that step isn't necessary. 
swf size does change every time, hard to tell why.</s><s> possibly some timestamp is affecting zip deflation rate? 
i had the "factoryclass" warning when building, but haven't fixed it, since the swf worked fine. 
</s><s>so.. why doesn't it work for you.. 
</s><s>my binary runs well on your machines, your binary fails on my machine: that means your build setup is producing an invalid binary.</s><s> what can go wrong with the build setup?</s><s> flascc and flex installations are pristine fresh.</s><s> java?</s><s> very unlikely knowing that you've tried it on so many different machines..</s><s> other gnu build environments interfering with flascc?</s><s> in that case it would just fail to build..</s><s> other flash installations and their playerglobal.swc interfering with flascc one?</s><s> may be worth checking the path on that regard.</s><s> i think it's essential for flascc to find its own playerglobal.swc in sdk/usr/lib, rather that some other (the flex one, for instance). 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5256649</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="MikeHil" timestamp="Apr 21, 2013 11:20 PM">
<s>been having the exact same problem.</s><s> compiled new binaries from both mac and windows.</s><s> my setup is apache flex 4.9.1, flascc 1.0.1 and tested the output from flash player 11.5 to 11.7 on both a mac and a windows. got the same error. 
</s><s>will aslo look into this further. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5257061</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="MikeHil" timestamp="Apr 22, 2013 4:40 AM">
<s>i finally got the samples to work.</s><s> i made sure i deleted all paths i created then i used flascc 1.0.0 instead of 1.0.1.</s><s> i also made sure that the correct playerglobal.swc is being used by editing the flex-config.xml as suggested by illya. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5260559</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Apr 23, 2013 5:46 AM">
<s>flascc 1.0.0 worked, thanks. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5946551</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="_falcan0" timestamp="Dec 19, 2013 9:38 PM">
<s>unfortunately adobe made sure to remove all flascc downloads, so i can't re-download 1.0.0 correct me if i'm wrong but noone did bother fix the issue in crossbridge as well so far - so i've got this swc where i want to use threads but it just freezes up the whole flash. 
</s><s>i've tried compiling sample 09 swc and same thing, freezeup...i remember with flascc 1.0.0 it used to work.</s><s> anybody has a copy of 1.0.0 perhaps?</s><s> or did they dix this in the future branch of crossbridge finally...i'm gonna try tomorrow, but somehow my hopes are not high. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5947364</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="adufilie" timestamp="Dec 20, 2013 7:30 AM">
<s>in case this bug isn't fixed in crossbridge, here's the working version of flascc: https://dl.dropboxusercontent.com/u/6289072/flascc_1.0.0.zip https://dl.dropboxusercontent.com/u/6289072/flascc_1.0.0.dmg 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5086281-5947622</DOCNO>
<TEXT>
<subject>Problem using sample pthread.swc in a Flex project</subject>
<post author="_falcan0" timestamp="Dec 20, 2013 9:06 AM">
<s>hey, i tried to compile sample 09 in crossbridge and it freezed up unfortunately when using the joins in swc.</s><s> i tried crossbridge 1.0.1, not the futures branch whcih i understand is not really finished. 
</s><s>thanks for the upload!</s><s> i found it in the end, on a chinese(!</s><s>) server and downloaded yesterday.</s><s> i will put it up on my server later on to host it permanently, in case adobe won't mind, until its fixed. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-1157206</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 20, 2013 3:34 PM">
<s>here's some code i have been trying to compile all day and having gotten a cryptic linker error that i can't figure out. 
</s><s>first here is my makefile: 
t09: check @echo "-------- problem --------" "$(flascc)/usr/bin/g++" $(base_cflags) main.cpp -swf-size=960x540 -emit-swf -o problem.swf -las3++ -lflash++ include ../makefile.common clean: rm -f *.swf 
main.cpp #include "as3/as3.h" #include "problem.h" int main() { problem *prob; prob = new problem; printf("main\n"); as3_goasync(); } 
problem.h #ifndef _state_game_h_ #define _state_game_h_ #include "as3/as3++.h" // using as3 var wrapper class #include "flash++.h" // using avm2 sync primitives // use "ui" as3 var wrappers which marshall var manipulations to the ui worker using namespace as3::ui; class state_game; class state_menu; class problem { public: problem(); void changestate(int k, state_game *sg); var update(state_game *sg); }; #endif 
problem.cpp #include "problem.h" #ifndef _state_game_h_ #define _state_game_h_ #include "object_background.h" void problem::changestate(int k, state_game *sg) { if (sg->getcurrrentstate() >= 0) { sg->clearstate(); sg->setcurrrentstate(-1); } state_menu *psm; psm = new state_menu; }; var problem::update(state_game *sg) { sg->update(); }; problem::problem() { state_game *gamestate; gamestate = new state_game; object_background *background; background = new object_background; changestate(0, gamestate); //set to menu_state at first }; #endif 
state_menu.h #ifndef _state_game_h_ #define _state_game_h_ #include "state_game.h" class state_menu : public state_game { public: state_menu() { }; }; #endif 
state_game.h class state_game { private: int current_state; public: state_game() { current_state = -1; }; void makestate() { }; void clearstate() { }; void update() { }; int getcurrrentstate() { return current_state; }; void setcurrrentstate(int k) { current_state = k; }; }; 
when i compile this i get the following linker error: 
/var/folders/fs/ldvqpfrd2ng11w5d26f6qq540000gn/t//ccvlfreh.o: error: undefined reference to '__zn7problemc1ev' 
this is a compiler generated file, '__zn7problemc1ev'.</s><s> i don't know why this is occurring since their are no errors in the compile phase and i do not have a class of this name. 
</s><s>can someone help me understand what is going on here? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5089538</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="Shongrunden" timestamp="Feb 20, 2013 3:56 PM">
<s>does it help if you switch the order of -lflash++ and -las3++?</s><s> also you might try changing your includes for flash++ and as3++ to use <> instead of "", for example: #include <flash++.h> 
(see the flash++ documentation here: http://www.adobe.com/devnet-docs/flascc/docs/capidocs/flashplusplus.ht ml) 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5089644</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 20, 2013 4:57 PM">
<s>i switched the order of -lflash++ -las3++ in the makefile command, but got the same error. 
</s><s>likewise i tried using the angle brackets rather than the double-quotes for flash++ and as3++, but it made no difference.</s><s> i still got the exact same linker error. 
i have poured over the page you linked to for the past three days and have learned a lot, but it does not help me with this particular error. 
</s><s>can you try to compile it and se what you find? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5089646</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 20, 2013 5:06 PM">
<s>now that i look at the errors i must say that they are not exactly the same.</s><s> here are the resulting linker errors from the three most recent compile attempts: 
/var/folders/fs/ldvqpfrd2ng11w5d26f6qq540000gn/t//cc2pmpve.o: error: undefined reference to '__zn7problemc1ev' 
/var/folders/fs/ldvqpfrd2ng11w5d26f6qq540000gn/t//ccecznh4.o: error: undefined reference to '__zn7problemc1ev' 
/var/folders/fs/ldvqpfrd2ng11w5d26f6qq540000gn/t//ccdbjbxy.o: error: undefined reference to '__zn7problemc1ev' 
note the difference in the .</s><s>o file name.</s><s> is this significant? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5089694</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="Shongrunden" timestamp="Feb 20, 2013 5:14 PM">
<s>i think those are just temp files.</s><s> it doesn't look like this code actually uses any flash features.ÊÊ you might want to try removing the flash++/as3++ includes and see if you can compile this code with a native g++ toolchain.
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5089947</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="stick158" timestamp="Feb 20, 2013 8:44 PM">
<s>try adding both problem.cpp and main.cpp in your makefile.</s><s> that should do the trick. 
</s><s>t09: check @echo "-------- problem --------" "$(flascc)/usr/bin/g++" $(base_cflags) problem.cpp main.cpp -swf-size=960x540 -emit-swf -o problem.swf -las3++ -lflash++ include ../makefile.common clean: rm -f *.swf 



</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091336</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 9:42 AM">
<s>i took them all out to isolate the problem.</s><s> this is actually part of a more complex project which exhibits the same error.</s><s> by simplifying the project i was hoping to isolate the problem and squash it in my larger project as well. 
i will try your suggestion 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091341</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 9:48 AM">
<s>i originally had it in the make command as you suggest.</s><s> i just tried it again (sometimes that works), but no, i go the exact same type of linker error: 
/var/folders/fs/ldvqpfrd2ng11w5d26f6qq540000gn/t//cczyto8x.o: error: undefined reference to '__zn7problemc1ev' 

</s><s>still searching for a handle on this ... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091426</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 10:11 AM">
<s>well, i went back and tried your suggestion, but i got errors because of the use of var as a type (problem.h, line 16).</s><s> this is an action script feature, so i can't just simply compile them without making some further changes to the code. 
</s><s>so i changed the one function 
var problem::update(state_game *sg) 
to 
void problem::update(state_game *sg) commented out all the references to action script in the includes and namespace, etc. then i tried to compile it using the following command 
~/flascc/sdk/usr/bin/g++ problem.h main.cpp -o problem 
and got the same error! /var/folders/fs/ldvqpfrd2ng11w5d26f6qq540000gn/t//cc2lmwpi.o: error: undefined reference to '__zn7problemc1ev' 
so this is not a flash problem (i never thought it was).</s><s> but can anyone see what i'm doing wrong here? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091428</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 10:13 AM">
<s>tried it with this command as well with the same error: 
~/flascc/sdk/usr/bin/g++ main.cpp state_game.h state_menu.h problem.h problem.cpp -o problem 
just to follow up ... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091654</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="Shongrunden" timestamp="Feb 21, 2013 11:15 AM">
<s>doesn't look like a flascc bug since i can reproduce this with native g++. 
</s><s>see attached zip and call 'make native' to see the same results in a native toolchain. 
</s><s>to investigate further can you make the example a little smaller and package it up into a zip?</s><s> i tried working with the files you describe above, but it's missing pieces (like object_background.h). 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091655</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="Shongrunden" timestamp="Feb 21, 2013 11:15 AM">
<s>oops, forgot to attach. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091723</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="Matt%20Cannizzaro" timestamp="Feb 21, 2013 11:33 AM">
<s>to figure this out, i tried compiling each source file to an object file separately: 
$ g++ -o problem.o -c problem.cpp $ g++ -o main.o -c main.cpp 
then i used nm to see what symbols each object file contains: 
$ nm problem.o nm: no name list 
problem.cpp isn't producing any symbols; that's pretty interesting and unexpected.</s><s> a closer look at problem.cpp reveals this: 
include "problem.h" #ifndef _state_game_h_ #define _state_game_h_ ... #endif 
the #include for problem.h causes _state_game_h to be defined, so the entire contents of problem.cpp are removed by the preprocessor.</s><s> generally include guards should only be used in .</s><s>h files, not .cpp files.</s><s> removing the include guard from problem.cpp solves the issue, though it uncovers a bunch of compile errors in problem.cpp. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091754</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="stick158" timestamp="Feb 21, 2013 11:41 AM">
<s>edit: haha, so by the time i wrote this post, 3 people have already responded.</s><s> some of the stuff i cover has already been said. Ê so i took a more in depth look at your code and i noticed a couple things.</s><s> granted, it's hard to debug code when i only have a small chunk but here's what i noticed: Ê (super small bug) you need to #include <stdio.h> in your main.cpp for the printf.</s><s> there is a #ifndef _state_game_h_ in almost every file.</s><s> during the pre-processing, it will pick up the fact that in subsequent files that you have this in, it will not include them.</s><s> so, if you want to have each file included make a new pre-processor directive for each file. problem.hÊÊÊÊÊ => #ifndef _problem_h_ state_game.h => #ifndef _state_game_h_ state_menu.h => #ifndef _state_menu_h_ also, as a side note for #2, don't put those #ifndefs in the .cpp files.</s><s> they only need to be in the .</s><s>h, but #include the .</s><s>h in the .cpp.</s><s> you don't seem to put parens after any of your constructors.</s><s> you may want to explicitly specify to the compiler to use the nullary constructors. ÊÊÊÊÊÊÊÊÊ ex: Ê === main.cpp === #include <stdio.h> #include "problem.h" Ê int main() { ÊÊÊÊÊ problem *prob = new problem();ÊÊÊÊÊÊÊÊÊÊÊÊÊÊÊ // <- this might be the problem ÊÊÊÊÊ printf("main\n"); Ê ÊÊÊÊÊ as3_goasync(); } Ê === problem.cpp === Ê #include "problem.h" #include "state_menu.h" #include "state_game.h" #include "object_background.h" problem::problem() { ÊÊÊÊÊÊÊÊÊ state_game *gamestate = new state_game(); ÊÊÊÊÊÊÊÊÊ object_background *background = new object_background(); ÊÊÊÊÊÊÊÊÊ changestate(0, gamestate); //set to menu_state at first }; Ê finally, i've come to notice that putting .</s><s>h files in the makefile's build command does nothing.</s><s> it will only respond to adding .cpp files.</s><s> so for your state_menu.h and state_game.h files - as long as the pre-processing directives are setup correctly - they will be automagically included because there is no corresponding .cpp file.</s><s> as long as problem.cpp and main.cpp are the only 2 .cpp files in your project, this commend will work. Ê Ê "$(flascc)/usr/bin/g++" $(base_cflags) problem.cpp main.cpp -swf-size=960x540 -emit-swf -o problem.swf -las3++ -lflash++
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091857</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 12:13 PM">
<s>thanks everyone.</s><s> i will try out the suggestions.</s><s> btw, i originally only had the guards in the .</s><s>h files, but kept getting redefinition errors for state_game.</s><s> by putting the guards in the cpp file i thought i had squashed that bug.</s><s> but as matt cannizzaro points out this squashes the whole problem.cpp. 
i will need to look at that again. 
i should have included the object_background.h file.</s><s> since it doesn't do anything i forgot. 
</s><s>again, thanks for your insightful help.</s><s> i will try these suggestions out. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091861</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 12:15 PM">
<s>@stick158 
since printf goes to the stage because of the console.as, i don't think you need <stdio.h> included.</s><s> none of the flascc examples include it. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5091944</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 12:27 PM">
<s>it worked as matt and stick158 diagnosed it. 
</s><s>the header guards were not correct in the problem.h and state_menu.h files, plus the missing parens on the constructor calls ... as you can tell i'm much more at home in action script than c++.</s><s> i haven't needed to use it for several years and my c++ skills are now rusty ... 
</s><s>that's partly why i writing this little project ...</s><s> so i am very grateful for all your insight! 
</s><s>if i could click on "correct" for everyone i would! 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5089477-5093142</DOCNO>
<TEXT>
<subject>linker error Çerror: undefined reference to '__ZN7problemC1Ev'È</subject>
<post author="lumenmedia" timestamp="Feb 21, 2013 9:57 PM">
<s>got my larger project to compile as well!</s><s> super thanks to matt, shongrunden and stick158! 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-1173055</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 7:41 AM">
<s>edit: i have tried using pure theora libs (no ffmpeg) and the same result - i have created a simple app showing theora info. when launched as standalone,works (shows theora version).</s><s> as swc, error "can't allocate encoder context".</s><s> anyone any idea why it's failing with allocations in swc?</s><s> this is really frustrating, seems i can't get anything video related to work.</s><s> is swc able to support anything more than some simple c stuff? ---------------------------------------------------------------------- ------------------------------------------------------------------ 
hi, i'm trying to make ffmpeg work through my custom swc library which would encode multiple frames to mpeg1.</s><s> i was "almost" finished now - managed to put together a test app which upon exporting to swf displays nice progress log(i'm test encoding 25 frames in mpeg1, so it shows encoding frame 1...</s><s> x bytes, encoding frame 2...x bytes etc.</s><s>), all is great up to this point. 
</s><s>the problem is, when i emit this to swc.</s><s> when calling my magic encode test function in the swc - first, i've got stack overflow error in "dsputil_static_init".</s><s> this was already weird, but i figured out that i didn't need the static init for mpeg1 encoding after exploring ffmpeg a bit, so i tried to disable this call in ffmpeg source.</s><s> then recompiled ffmpeg, my lib, tested and swf still appears to be working fine without it.</s><s> but again, when exporting to swc - it didn't stack overflow, but this time my library errors out with "can't find codec". 
i have 3 variants of the code actually - swf, swc and one executable which produces a real .mpg file so i can have better proof than "encoding frame x".</s><s> and it still produces a good mpeg when executd from cygwin's command line.</s><s> the only problem is the swc. 
</s><s>my basic confusion is - why if swf/executable with the same libs etc. working fine, and then the swc is failing on me?</s><s> i'd really need to fix this somehow, but i don't understand the reasons, i thought once it's working in swf it will work as swc. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5160222</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 19, 2013 8:22 AM">
<s>i assume you attach swc to an swf the same way as sample05_swc does, i.e. using flex?</s><s> then it might be a flex configuration issue.</s><s> flex builds for an old player version by default.</s><s> what i'd suggest doing: 
if building from command line, pass -target-player=11.5 and -swf-version=18 to flex.</s><s> if you aren't building from command line, edit frameworks/flex-config.xml and update target-player and swf-version.</s><s> add a corresponding playerglobal.swc to flex in frameworks/libs/player/<player_version>. 
i hope that works! 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5160321</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 9:01 AM">
<s>hey ilookha, thanks for your reply!</s><s> i'm actually trying to attach swc to flash cs6(linking the library), there it failed miserably straight away.</s><s> i only used the standard params, with emit-swc= etc. then, i also tried with flex out of desparation to make sure it's not flash related.</s><s> yep, i took the command from the their 05 sample to compile: Ê "$(flex)/bin/mxmlc" -static-link-runtime-shared-libraries -compiler.omit-trace-statements=false -library-path=murmurhash.swc -debug=false swcdemo.as -o swcdemo.swf Ê i tried linking my swc with my own dummy .as file which is only calling a single c function, everything compiled fine but the same error was traced out (cannot allocate codec context).</s><s> some malloc going on with codec structure initialisation from what i'm looking briefly into the source code of theora. Ê i have hinted upon to what you are suggesting and did try some -swf-version=18 at one point but then abandoned it.</s><s> i didn't try the target-player though, so i'll try also that.</s><s> what's most frustrating is that if i emit to standalone swf everything works perfectly fine(when i open it through double clicking in windows).</s><s> so your remark about flash player versions etc. make sense - i guess standalone swf could be exported for newer flash player, whereas swc is simply dependant on the containing swf (in flash cs6 or flex framework), therefore might be failing, right?Ê anyway i'll try and let you know, thanks again! Ê ---------------------------------------------------------------------- ---------------------------------------------------------------------- -------------------------------------------------- edit: i noticed that in the standalone player where the swf with the same code works is version 11.2.something, oops.</s><s> so i'm not sure anymore the version would be an issue..but i will try your suggeston anyway.</s><s> could there be another reason why swf might work while swc with the practically same code/libs would be failing?</s><s> memory allocation problems or something?
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5160703</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 11:38 AM">
<s>ok, this is what i did Ê 1) i've got the globalplayer 11.5 from adobe's archive, copied it to the corresponding folder(right next to 11.1 which was already included in my flex). Ê 2) mxmlc -static-link-runtime-shared-libraries -compiler.omit-trace-statements=false -library-path=decoding_encoding.swc -debug=false document.as -o swcdemo.swf -target-player=11.5 -swf-version=18Ê Ê where decoding_encoding.swc is my former c library, document.as only calls one function(the encoding one).</s><s> this got me the swf. Ê 3) i run this swf in debug player, in ie (11.6), and error is popping up. Ê in flashlog.txt i found this: Ê encode virtual fileÊÊÊÊÊÊÊÊÊÊÊÊ <-- this is entry point of my c function (all is fine so far, proof that it has been called) could not open codecÊÊÊÊÊÊÊÊÊÊÊ <-- fail again, this fails also in theora at a similar function (register codec context..huh?</s><s>) [object exit] ÊÊÊÊÊÊÊÊÊ at global/com.ffmpeg::f__exit() ÊÊÊÊÊÊÊÊÊ at global/com.ffmpeg::f_exit() ÊÊÊÊÊÊÊÊÊ at global/com.ffmpeg::f_ffmpeg_encode_mpeg1() ÊÊÊÊÊÊÊÊÊ at global/com.ffmpeg::encode_mpeg1() ÊÊÊÊÊÊÊÊÊ at document() Ê 4)Ê i then go to my presumably failing c library, and change this in main: Ê //Ê as3_goasync();ÊÊÊ <-- i commented this ÊÊÊ ffmpeg_encode_mpeg1(av_codec_id_mpeg1video);ÊÊ <-- i uncommented this Ê i launch the swf just to see if it also fails, but it goes like: Ê encode virtual file [mpeg1video @ 0x601410] warning: not compiled with thread support, using thread emulation entering loop etc..ÊÊ Ê all works!</s><s> so i really don't understand, how can it work in the emitted swf while in emitted swc it already doesn't work?</s><s> is there a different way the swc is built, is it the way it manages memory at runtime, being restricted somehow by the main swf, or is it just some stupid switch or setting.</s><s> i'd need to see a little deeper into how the swc is build i guess to fully understand this issue.</s><s> do you have any isnight into this ilookha, or someone else?Ê or perhaps any other idea. Ê i'm now trying to see if i can try to trace out the exact point of the issue in theora lib, basically i included as3.h in their source code and now placing inline as3 "trace" commands into the register codec function. Ê i have traced in theora's lib inside th_encode_alloc function where it fails, and located the first obvious reason: Ê Ê enc=_ogg_malloc(sizeof(*enc)); Ê if(enc==null) { ÊÊÊÊ ÊÊÊÊÊÊ inline_as3("trace('enc is null!');\n");Ê <-- my trace Ê } Ê i'm getting "enc is null".</s><s> which results into codec not found, because the whole function returns null.</s><s> so it seems _ogg_malloc is failing to allocate memory.</s><s> i bet the same reason goes for ffmpeg.Ê _ogg_malloc is: Ê #define _ogg_mallocÊ malloc Ê just a normal malloc.</s><s> why wouldn't this work?
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161138</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 19, 2013 1:14 PM">
<s>i've seen normal malloc fail just because there was not enough memory.</s><s> we're often balancing on the edge of flash player memory limits it's worth checking what is your player's memory usage at the point of failure.</s><s> also dumping sizeof(*enc) won't hurt. 
</s><s>but also what was strange to see in your example is any code after as3_goasync().</s><s> this function is a hack that allows you to exit main() without triggering global destructors (it's covered in the reference manual).</s><s> so if you have any code after it, this code won't ever be run.</s><s> and it makes sense that everything starts working when you comment as3_goasync out.</s><s> it still doesn't explain why swf works when swc doesn't though 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161437</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 1:52 PM">
<s>hey ilookha, as for the memory that's where i'm concentrating right now, because apparently it's the reason why those libs are failing on me(malloc returning null).</s><s> as for the async, yeah i had code there and i know it won't execute, it is there just o i can quickly "morph" my swc into swf which has working code in main, and no async. Ê anyway, i started with a new simple test to be sure it's not anything like you suggest (size of enc and so on).</s><s> and it goes strange :o Ê ÊÊÊÊÊ inline_as3("trace('allocating 1 byte with standard malloc');\n"); ÊÊÊÊÊ fprintf(stderr, "allocating 1 byte with standard malloc\n"); ÊÊÊÊÊ test = (char*)malloc(1); ÊÊÊÊÊÊ if (test == null) { ÊÊÊÊÊ inline_as3("trace('fail!');\n"); ÊÊÊÊÊ fprintf(stderr, "fail!\n"); } else { ÊÊÊÊÊ inline_as3("trace('success!');\n"); ÊÊÊÊÊ fprintf(stderr, "success!\n"); } free(test); Ê Ê guess what i get - when i build swf "success", in swc i get "fail".</s><s> 1 byte, lol?</s><s> this surely can't be a problem with not enough memory, maybe me not understanding something or doing something wrong.</s><s> we can use malloc in swc, right.</s><s> i also did another test which is checking for cmodule.malloc pointer value (which i get with getscalarfromvar) and it also returns 0 in swc, but i am able to use it by memcpy into it and returning containing value.</s><s> huh?:p
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161541</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 19, 2013 2:38 PM">
<s>this looks like cmodule is not getting initialized.</s><s> have you checked if there is a call to cmodule.startasync from your main.as (or whatever "root" actionscript file you have) when you're building an swc-based target?</s><s> unless you've written your own console implementation, when you build an swc, default console.as is not used.</s><s> so you need to implement initialization yourself. 
</s><s>that's how they seem to do it in flascc's samples 05_swc and 09_pthreads. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161692</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 3:26 PM">
<s>yes you are right !</s><s> the startasync is missing.</s><s> i think i'm a bit confused from the console.</s><s> my main.as, is that the project where i'm including the swc from, right.</s><s> i'm a bit confused as there are *.as files also on the flascc side, like the console.as which can be compiled into abc..</s><s> i'm not sure from which side i should approach this.</s><s> i'm trying to initialize, so far no luck 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161744</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 19, 2013 3:34 PM">
<s>yeah it does seem confusing at first, then you get used to it 
i'd recommend copying console.as from flascc to your source folder and using it in both swf and swc cases.</s><s> the difference on the command line would be that in swf case you need to supply console.abc with a -symbol-abc parameter, while for an swc you just need to append console.abc to the command line without any prefixes. 
</s><s>then the main.as (the project you're including the swc from) should create an instance of console class and add it to the scene. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161877</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 4:19 PM">
<s>thanks, this makes it so much clearer!</s><s> i tried supplying the console (without -symbol-abc) - weird thing is i can't "see" the "console" in the autofill as i write com.theoralib (the package file), even in the catalog.xml i can see: Ê <def id="com.libtheora:console"/> Ê also now when in the document.as(my "main.as") i do: Ê var console:console = new console(this); com.libtheora.cmodule.startasync(console); addchild(console); getinfo(); Ê i'm getting "call to main!" trace now (i've put a trace into main, before goasync, to make sure my console is calling the main, therefore hopefully working).</s><s> so i guess, something is happening now.</s><s> but i'm still getting Ê allocating 10 bytes with standard malloc fail! Ê (this is my trace of malloc, happens after call to main).Ê this is in my console.as init method (btw.</s><s> i copied the "default console" from usr/share/): Ê trace("starting async..."); cmodule.startasync(); Ê starting async is also traced in my app.</s><s> really weird..but i'd bet it's the console, that would explain why swf works all nicely, if it has the console fine... Ê -------------------------------------------- Ê edit: flex compiles it and the output is fine! Ê allocating 10 bytes with standard malloc success!</s><s> allocating 10 bytes with cmodule malloc success!</s><s> byte 0:65 byte 7:66 version: xiph.org libtheora 1.1 20090822 (thusnelda) bitstream: 3.2.1 (0x030201) default speed level: 1 maximum speed level: 2 Ê ----------------------------------------------- Ê but why doesn't it work in flash cs6 still,hmm.
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161871</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 19, 2013 4:23 PM">
<s>i think you don't need to call cmodule.startasync from document.as.</s><s> console will do it by itself when it's added to the scene.</s><s> i hope that's what's making it fail now (startasync before scene is available), because i don't have any more clues left 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161873</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 19, 2013 4:24 PM">
<s>ok, then maybe it's something as simple as flash cs6 project properties?</s><s> some equivalents of target-player etc..</s><s> as well as playerglobal.swc in its internals. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5161929</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 6:41 PM">
<s>you're right again of course Ê i noticed startasync is being called twice(my trace traced 2x), so the code is just: Ê var console:console = new console(this); addchild(console); getinfo(); Ê that's working great in flex now -Ê getinfo() is my custom c function for getting some theora info no codec or malloc errors, and it is outputting printf to screen even which is also great. Ê ------------------------------------ Ê so far no luck with cs6, i tried to export uncompressed swf for both cs6 and flex for fun, and see the insides of the swf are quite different.</s><s> maybe they're just packed in flash..i just got a feeling it might have to do something with flash inserting the document/scene automatically etc., might maybe break something, but not sure about it yet.
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5162595</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 19, 2013 9:39 PM">
<s>i finally got to have a look at what flash cs6 provides in terms of target players, and the latest one in its list is 11.2 (document properties).</s><s> so i'd say that explains all the weirdness.</s><s> they just haven't updated flash for a while, so it's a bit outdated for flascc. 
</s><s>but i'm glad it works with flex now for you! 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5162628</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 19, 2013 10:09 PM">
<s>hey, thanks!</s><s> what is weird is that my test app launched fine in standalone flashplayer 11.2 (when compiled as swf before i found out the swc thing - i remember right button clicking and the version was 11.2.something), so i don't understand why it would mind the target 11.2 in fp6 and start acting funny.</s><s> but i might be confused already from all those versions - it's 6 in the morning and i'm still at it i'm thinking to migrate my whole project to flex.</s><s> it's kind of stupid, but i think i should be able to do it in worst case, there's no timeline code or animations(except buttons), even there is ui which would need to be exported into swc's i guess.</s><s> i also switched off automatic stage instance declarations.</s><s> of course, i would rather find the magical setting/solution/button to just make it work like it does in flex 
maybe after i wake up something will hit me.</s><s> i originally thought the issue might be some cs quirk which is causing the compilation to be a little different from flex(if it's not the fp version), but i don't really know much about cs compiler so i'm guessing.</s><s> myself i've used alchemy 1 swc's without issues in cs6, and those of course have mallocs.</s><s> anyway i'll mark your answer to the original problem as correct because that really helped me (with the console) to make it work in flex at least.</s><s> if you have any other ideas about cs6 i'll be happy to read it here though of course, i'm not giving up on cs6 just yet 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5163431</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="ilookha" timestamp="Mar 20, 2013 7:17 AM">
<s>yeah it does sound strange that it used to work with cs6 for you.</s><s> maybe alchemy 1 relied less on player's features and had everything embedded in the swf. 
i might be wrong, but as3 compiler is essentially the same in cs6 and flex, but it may be used differently.</s><s> different arguments may be passed depending on configuration.</s><s> flash and flex have their own copies of playerglobal.swc, which is very essential to enable the latest flash player features (and flascc depends on them).</s><s> there are many factors that could make cs6 fail to assemble a proper swf, but if flex approach works, i would stick to it, unless you feel adventurous 
in my case, we use only flascc build pipeline, without even flex.</s><s> it has everything needed, apart from proper swc linking, but we managed to avoid it (not using any 3rd party swcs). 
</s><s>it's my pleasure to help!</s><s> cheers man.</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5164338</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 20, 2013 12:35 PM">
<s>thanks again for your previous help yeah, it enables me hopefully to go on at least, if i don't hit something else.</s><s> in my case the project is several months in, uses some 3rd party swc's + there are various linked assets in the fla etc. luckily just like 1 month ago i did cancel the automatic stage instances and rewrote parts of code so it's not dependant on the flash cs, i guess a good move. 
</s><s>i've been looking into the cs6 issue again though, i want to give it one day before i decide to go and port everything.</s><s> in the end i decompiled flex swf and flash swf to compare.</s><s> flex produced swf among others contains about 100 extra "misc tags" named binarydataxx(some number), containing (in hex view) references to all of my com.libtheora.xxxxxx stuff. 
</s><s>flash produces swf with just 7 "misc tags" tags(doabc, symbol class, file data etc.</s><s>), but nothing with com.libtheora.xxxxx.</s><s> it seems like flash isn't linking something in, or dropping something when the linkage is going on, not sure yet.</s><s> weird because i'm including my swc with merge into code and all. -------------- in fact it seems like what flash doesnt include are the "private packages".</s><s> those with very looong names. -------------- compiled the swc with -o4 and first malloc allocation success, otherwise fail - probably random success due to the optimization and unexpected stuff flash is getting.</s><s> but it looks like the cmodule is not getting initialized for some reason.</s><s> i guess i'll be going with flex - will test if my swc can do what i need in flex and then proceed. 
</s><s>this should be a warning to anyone using flash cs trying to integrate flacc swc - if someone suceeds though please let me know. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5168791</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 21, 2013 6:36 PM">
<s>just wanted to post a short update - i made the basic version of theora encoding work in flash, so thanks for the last time to ilookha otherwise i'd end up being stuck with the swc mystery 
to sum up - i basically took libtheora, libogg, libvorbis, compiled them with flascc.</s><s> i found one great & simple theora example (http://www.maefloresta.com/portal/files/theora.cpp.txt), which became the foundation of my lib.</s><s> i modified it to accept bytearrays from flash as frames instead of png images, and outputting packets to output buffer instead of file.</s><s> from flash i'm sending stage caps, in theory any movieclip can be sent.</s><s> then i'm calling encode() and getting back another bytearray containing nice(and pretty small!</s><s>) ogg file. 
</s><s>finally, i'm sending this to my server using amfphp and saving the file.</s><s> flash cs6 still doesn't like swc's produced by flascc for some reason - it magically seems to work with theora lib, even sends something to the server but its garbled and 2,6mb instead of 500k(so i think still problems with malloc and maybe cmodule init even).</s><s> also another important thing i have noticed in cs6 - the console output is not redirected to screen like it is when i build it in flex.</s><s> could be a sign with problems regarding the console or something else, not sure. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5185498</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 27, 2013 11:52 PM">
<s>hey, i'm developing an air app that needs to encode / upload small snippets of video.</s><s> i'm a noob with c and just started using flascc today - i've tried messing with ffmpeg with little luck.</s><s> would you be willing share your swc? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5186014</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 28, 2013 6:14 AM">
<s>hi there, why do you need ffmpeg, is there a specific codec you need to use for encoding?</s><s> you might as well use theora / ogg for this job, or lee's flv encoder if you say the videos will be small (http://www.zeropointnine.com/blog/updated-flv-encoder-alchem/). 
</s><s>anyway to your question - it's true i did manage to create swc around ffmpeg library and now also sending dummy mpeg-1 video to my server through the swc, from flash.</s><s> however, i did this literally yesterday(the ffmpeg test i write about in this thread was even simpler), and just today i'm going to add capturing of stage instead of dummy yuv frames.</s><s> as you can see it's pretty much work in progress. 
</s><s>because you are using air, it seems you might even do yet another thing, in case you need different format than flv 
- capture the video using lee's flv encoder - save the temp flv file on ipad - launch ffmpeg command line tool through yet non-existing flascc wrapper - this would convert the flv to anything you need, then you can do whatever with this file 
so the critical part here is of course the non-existing wrapper.</s><s> it could be just modified version of ffmpeg.c, which would call their main function with comand line arguments.</s><s> i'm not sure if fopen fwrite etc. automatically work in air's sandbox, that would also need to be tested.</s><s> interesting idea for another wrapper which i might do 
so as you can see there are several options.</s><s> i'm not prepared to explicitly share my work in progress at this point (even the theora/ogg swc is finished), but i'm building a website where i will, in some form, make the theora + ffmpeg wrappers available (probably in like a week or so).</s><s> i'll post a link here once i'm ready. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5186718</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 28, 2013 10:05 AM">
<s>thank you, that's really helpful! 
i actually started with lee's flv encoder and it's very easy to use, but deosn't compress anything.</s><s> what i'm trying to do is record a 15-30 second video, encode it so it's not gigantic, and send it to fmis to be streamed.</s><s> so to my understanding i'll want mp4 or flv.</s><s> the only bummer with lee's flv encoder is that it doesn't add any compression, so really small, short videos still come out pretty big. 
</s><s>i'm still trying to get ffmpeg to compile this whole thing may take longer that i planned 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5187201</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 28, 2013 12:35 PM">
<s>hi - strange, ffmpeg should compile pretty fine in flascc, the problems i had mostly came from "how to make swc out of it" important to note is, mp4 and flv are only containers for video + audio stream.</s><s> video and audio streams are encoded with codecs, you're probably looking for h264 codec.</s><s> there might be legal issues with h264, as then your app would from my understanding have to be gpl'ed..more here http://www.ffmpeg.org/legal.html.</s><s> in fact, if you want to compile ffmpeg with this codec it forces you to compile with --enable-gpl or somesuch, where you are something like agreeing to the risks of using this codec. 
</s><s>another important thing to understand is, ffmpeg doesn't have all the libraries for all the codecs integrated.</s><s> you might need to download the codec libraries first (like this http://www.videolan.org/developers/x264.html), build them and after that building ffmpeg. 
</s><s>for now, you can try compiling ffmpeg at least with basic integrated mpeg-1 encoder, so you can get the workflow going, that should motivate you 
---------------------------------------------------- path=/cygdrive/c/path_to_flascc/sdk/usr/bin:$path ./configure --prefix=/cygdrive/c/path_to_flascc/sdk/usr --disable-ffserver --disable-everything --enable-filter=scale --enable-protocol=file --disable-network --disable-debug --disable-yasm --disable-asm --disable-stripping --enable-memalign-hack --disable-shared --enable-encoder=mpeg1video 
path=/cygdrive/c/path_to_flascc/sdk/usr/bin:$path ./make 
path=/cygdrive/c/path_to_flascc/sdk/usr/bin:$path ./make install -------------------------------------------------- 
you can also go to doc/examples/ and try to compile/run their examples, or try to play with ffmpeg.c, adding a wrapper function to call main perhaphs etc., just to get some swf where you can see ffmpeg command line executing. 
</s><s>overall, i understand your issue - i had the same exact problem with flv's being large to huge(100mb for 37 seconds video wasn't a problem ), my ogg wrapper solved it - but i just need to upload to youtube, not sending it to fmis.</s><s> it took me one week of very intense work to get the initial video encoding swc work with ogg / theora, mostly because of 0 experience with codecs, ffmpeg and little with gcc.</s><s> i've got ffmpeg working now with mpeg1 codec today by the way(not sending dummy frames anymore, but capturing actual flash stage http://www.youtube.com/watch?v=iqym75treku my goal is to create set of swc wrappers for few codecs (probably just those 3 in the initial version), which can be plugged in nicely into a project, and then just doing init, addframe, encode => getting video in bytearray.</s><s> but i'll attemp also for the command line ffmpeg wrapper, that's actually interesting alternative and can be dirty but quick solution for air. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5187867</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 28, 2013 4:05 PM">
<s>yeah, i was able to compile, but baffled by trying to figure out: "where in this makefile do i put '-emit-swc=ffmpeg.swc'?" 
</s><s>it looks like x264 can encode stuff on it's own - and it's a little less intimidating than ffmpeg.</s><s> what if i just use x264 (since i'm only encoding, not decoding)?</s><s> there will be licensing issues but i'm not worried about that at the moment... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5188999</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 29, 2013 5:15 AM">
<s>this goes to the gcc line, but you do this for your wrapper, not ffmpeg or x264...you probably thought you just compile it with emit-swc and magically get the lib work in flash? 
</s><s>yeah x264 is of course an option, but as i said above, what you get will be only encoded stream, you need to "mux" it to get a valid mp4 - if that's what you need.</s><s> muxing is, from my reserach, possible with ffmpeg or mp4box - which is another c util from another lib.</s><s> to me it seems the easiest to do this via ffmpeg like i described above. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5189980</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 29, 2013 10:45 AM">
<s>that's exactly what i thought!</s><s> so i guess ffmpeg is still a good option... and probably the direction i'll want to go.</s><s> it's a bummer they don't have flascc for linux.</s><s> i'm no good at doing all of this stuff on windows. 
</s><s>thanks again.</s><s> i'll let you know if i have any awesome breakthroughs 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5190390</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 29, 2013 12:53 PM">
<s>yeah it's a good option, althought you must compile your final swc with -o4 otherwise it will just have stack error issues (at least it had for me), and also if you want to plug the swc into your current project i only had success with flex..</s><s> flash cs added bunch of other weird issues i couldn't figure out.</s><s> so basically you need to compile ffmpeg first, then create wrapper and then compile that one with -emit-swc.</s><s> the flascc reference guide is a very good start to understand everything. 
</s><s>i'll let you know as well, i'm just about to start on the mp4 wrapper- 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5190428</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 29, 2013 1:18 PM">
<s>luckily, i am planning on using flex. 
</s><s>one last noob question (if you're up for fielding it): like i said, i'm not really a c programmer; i'm a web developer who's gotten into some dangerous terrain (so i'm used to all my code just being interpreted, not compiled ) - when i'm writing my ffmpeg wrapper, how do i link the compiled ffmpeg code?</s><s> i googled a little and it looks like i just include /cygwin/c/path/to/lib/ffmpeg.a when i compile..</s><s>?</s><s> would i have to rename main() in ffmpeg and call it from my wrapper? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5190780</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 29, 2013 3:24 PM">
<s>sure, myself i've not been using c / c++ for years, i used to write few games in it back then so to link, you'll do something like this: 
/sdk/gcc -o4 -wall ffmpeg_encode.c main.cpp -emit-swc=com.ffmpeg -symbol-class=:0:com.ffmpeg::console console.abc -o ffmpeg_encode.swc -lswscale -lavformat -lavdevice -lavcodec -lavutil -lvorbis -lvorbisenc -ltheora -logg -lz 
you can ifnore all the -lvorbis something, also -ltheora and -logg (this is for ogg).</s><s> maybe -lz too.</s><s> this i've used to compile my lib.</s><s> basically linker "merges" all of those libs your functions or functions from other libs are referencing.</s><s> ffmpeg is actually bunch of .</s><s>a files, not a single ffmpeg.a - and if you properly install the lib("make install"), you don't need to specify the full path.</s><s> it should install it into /sdk/usr/lib (.</s><s>a files) and /sdk/usr/include (.</s><s>h files - those are something like "wrappers" for the .</s><s>a files). 
</s><s>also those -l need to be arranged in the exactly right sequence - the example above has that right, but if you switched the order it wouldn't compile.</s><s> if you get undefined reference errors and something like "ld exited with error 1" you either didnt install some of the libs, or they can't be found in the right location, or your order is wrong. 
</s><s>oh and don't forget to compile in the console(you need to compile their default console.as into console.abc, then include into your output swc compilation).</s><s> see the flascc reference & samples, the console is explained there.</s><s> if you don't include it, it won't work because cmodule won't get initialized lol...as of your main() theory, yes, that's the idea, you would rename main to hidden_main(), then add your own ("exposed") function to as3 which you would use in as3 to call the hidden_main, with some preconfigured options.</s><s> i'm messing with mp4 now, muxing it in memory will be a bit hardcore wrapping up the command line should be easier. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5190944</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 29, 2013 4:33 PM">
<s>sounds pretty doable.</s><s> i'm just assuming this is a yes, but when i'm linking library files like that, should they have also been compiled with flascc?</s><s> because that's what i've started doing - i compiled x264 with flascc, and am now (even as we speak) compiling ffmpeg with flascc.</s><s> it just seems intuitively correct.</s><s> but is that really necessary - or do i just have to compile that wrapper with flascc? 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5190945</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 29, 2013 4:37 PM">
<s>hmm...</s><s> may have just answered my own question: 
</s><s>"regular x86-built libraries won't cut it, as flascc would expect all the object files to be native to the platform (in this case, whatever horrifying bytecode is used by the flash runtime), so naturally you'll have to build the static libraries with flascc to use them." 
- quote from this forum: http://sdl.5483.n7.nabble.com/flascc-flash-compiling-with-sdl2-0-any-l uck-compiling-td33240.html 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5190947</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 29, 2013 4:50 PM">
<s>but when i try to compile ffmpeg, i run make it goes along and cc's a bunch of files for about 5 minutes, then tries: 
ld libavutil/libavutil.so.52 
and fails with: 
/cygdrive/c/flascc/usr/bin/../../usr/lib/stdlibs_abc/crt1_c.o: error: undefined reference to '_main' 
in config.mak, i have 
ld=gcc ld_lib=-l% ld_path=-l ldflags= -wall -jvmopt=-xmx1g -wl,--as-needed -wl,--warn-common -wl,-rpath-link=libpostproc:libswresample:libswscale:libavfilter:liba vdevice:libavformat:libavcodec:libavutil:libavresample 
any thoughts?</s><s> i keep thinking i've got the hang of this and then stuff doesn't work... 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5190952</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 29, 2013 5:08 PM">
<s>oh!</s><s> i left out part of the error message - this probably has to do with how including x264: 
/cygdrive/c/flascc/sdk/usr/bin/ld:error: x264: no archive symbol table found (run ranlib) /cygdrive/c/flascc/usr/bin/../../usr/lib/stdlibs_abc/crt1_c.o: error: undefined reference to '_main' 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5191014</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 29, 2013 6:20 PM">
<s><quote>
<s>sounds pretty doable.</s><s> i'm just assuming this is a yes, but when i'm linking library files like that, should they have also been compiled with flascc?</s><s> because that's what i've started doing - i compiled x264 with flascc, and am now (even as we speak) compiling ffmpeg with flascc.</s><s> it just seems intuitively correct.</s><s> but is that really necessary - or do i just have to compile that wrapper with flascc? 
</s></quote>
</s><s>yes, your intuition is correct - everything an ffmpeg compiled lib in flascc is using needs to be also compiled with flascc.</s><s> edit: i see you said you did compile x264, so i'm not really sure why you are getting the errors.</s><s> i'd double check for the locations of libx264.a and the .</s><s>h files too.</s><s> also make sure you'r running configure, make, make install and that all three produce something useful / seem to not get any fatal errors. 
</s><s>i'm also compiling ffmpeg with x264 so we'll see in a little while. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5191162</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 29, 2013 6:54 PM">
<s>so i did manage to compile ffmpeg with x264 without any obvious issues.</s><s> when i look at list of ffmpeg codecs there's e next to h264, so it seems the encoder should be in.</s><s> there must be something wrong in your config or the steps you are taking.</s><s> this one is really weird: 
/cygdrive/c/flascc/usr/bin/../../usr/lib/stdlibs_abc/crt1_c.o: error: undefined reference to '_main' 
i didn't have to really edit config.mak so not sure how it should look like - undefined reference as i said before is pointing to linkage issues(missing or not properly ordered libs), but never saw crt1_c.</s><s> maybe someone else could help with this.</s><s> anyway the best you could do is really to make sure you try to compile the clean ffmpeg first, with mpeg1encoder only. 
1) configure (with the special parameters i pasted somewhere above, so it doesnt include all codecs, filters etc) 2) make 3) make install 
this should work, on clean flascc installation and fresh ffmpeg.</s><s> after this works, you can move forward: 
1) download libx264 from videolan, repeat the same 3 steps for their libs.</s><s> 2) make sure they are in sdk/usr/ , both .</s><s>a files in lib and .</s><s>h in include 3) then rebuild ffmpeg with extra libx264 flags --enable-encoder=libx264 --enable-libx264 --enable-gpl 
for me, this produces ffmpeg with libx264 included. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5191330</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 30, 2013 12:09 AM">
<s>first of all, pardon the non-english: " this probably has to do with how including x264:" second, i did compile, install, and check to make sure .</s><s>a, .</s><s>h, files etc landed in appropriate directories (ffmpeg wouldn't let me configure without it), before getting those errors... but i'll try it with your steps and your settings since that worked.</s><s> thanks!</s><s> 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5192556</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 30, 2013 10:11 AM">
<s>no problem, my english is not perfect either, esp. when tired 
i also realized one more thing: i did include --enable-static when doing configure with x264, and also i had to uncomment endian check from x264's configure because it was giving me "endian check failed" (not sure if you had this too). 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5193687</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Mar 31, 2013 6:32 AM">
<s>just an update, i did manage to create mp4 / h264 encoder swc for flash.</s><s> it's a custom wrapper around ffmpeg's muxing sample(not their command line ffmpeg.c), which i have modified for muxing only video stream and passing it flash captured frames.</s><s> it returns a finished video back to flash, in bytearray.</s><s> the advantage of not wrapping around their command line is i could easily break the "main loop", so the encoding is async(you can display progress after each frame, animation, etc.</s><s>).</s><s> since flash isn't really speedy when encoding h264 it's pretty useful the workflow is simple with the swc: Ê ffmpeg_init(800, 450); ÊÊ Ê (i'll add more params, like bitrate, fps, h264 speed presets etc.</s><s>) Ê ffmpeg_addframe(ba); Ê (this is repeated x number of times, you pass your bitmapdata in bytearray to the encoder (basically argb image stored in bytearray)) Ê var bo:bytearray = ffmpeg_encodeit(); Ê (this really flushes the output buffer, the encoding is done on each addframe - it saves the finished movie into bytearray).</s><s> then you can do anything you want with this bo, write this to file, send to server etc., and you've got valid .mp4.</s><s> tested also with mov...it really depends how i compile ffmpeg and the swc, it can work with various codecs / containers.Ê now i'll need to tidy up the lib a bit (the footprint is also large "thanks" to ffmpeg, so i want to look into that), and as i said earlier i'll post a link inside this thread once i have a website up shouldn't take too long.
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5194844</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="com.actualwebmedia" timestamp="Mar 31, 2013 7:14 PM">
<s>you are a legend. 
</s></post>
</TEXT>
</DOC>


<DOC>
<DOCNO>Adobe-Community/Adobe-Game-Developers-Forum/FlasCC/Discussions-5159040-5236693</DOCNO>
<TEXT>
<subject>SWC errors, while SWF works fine, why?</subject>
<post author="_falcan0" timestamp="Apr 15, 2013 10:23 AM">
<s>finally managed to package everything and put it on a quick website.</s><s> i've got 2 wrappers, one for ogg / theora, another one for ffmpeg (prepared for libx264), in one package.</s><s> they can be used as swc in any project.</s><s> also compiled in some of the info from this thread about compiling ffmpeg etc., and of course methods and their descriptions. 
http://www.rainbowcreatures.com/product_flashywrappers.php 
there is a free version to download for non-commercial use. 
</s></post>
</TEXT>
</DOC>


